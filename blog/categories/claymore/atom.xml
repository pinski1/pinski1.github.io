<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Claymore | Wires and Bits]]></title>
  <link href="http://wiresandbits.co.uk/blog/categories/claymore/atom.xml" rel="self"/>
  <link href="http://wiresandbits.co.uk/"/>
  <updated>2015-09-19T11:44:10+01:00</updated>
  <id>http://wiresandbits.co.uk/</id>
  <author>
    <name><![CDATA[Pinski1]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Claymore's Chassis]]></title>
    <link href="http://wiresandbits.co.uk/blog/2015/02/03/claymores-chassis/"/>
    <updated>2015-02-03T18:09:00+00:00</updated>
    <id>http://wiresandbits.co.uk/blog/2015/02/03/claymores-chassis</id>
    <content type="html"><![CDATA[<p>It&rsquo;s been a long time since I last updated this blog. In that time the designs for Claymore have changed quite a bit. I&rsquo;ve settled on a sensor layout as well as discarding the whole idea of a lasercut chassis. The biggest driver in the decision to discard the laser cut chassis was me finally accepting that the Faulhaber motor gearboxes were unworkable in their current state. They were in a prime position to be the main mounting point but due to their thin all-plastic design there was no way to mount to them satisfactorily.</p>

<h2>Chassis</h2>

<p>Since becoming a member of <a href="http://www.makespace.org">Cambridge Makespace</a> one of the more amazing tools I&rsquo;ve had access to is the <a href="http://wiki.makespace.org/Equipment/WarcoMill">Metal Mill</a>. This tool cuts through aluminium and steel like a dream and is the main driver behind my decision to build the chassis out of milled aluminium. As the electronics is designed to fit inside the chassis this then requires a redesign of the electronics too.</p>

<h3>Motor Mounts</h3>

<p>The first thing I re-designed was the motor mounts, the dimension are largely copied from the plastic originals however I added more thickness to the base to allow me to drill and tap these for mounting. Unlike the laser cut chassis the motors mount to the base of the chassis rather than the top. This allows the electronics to drop in from the top and the battery to be held in with gravity.</p>

<p><img class="<a" src="href="https://lh3.googleusercontent.com/c8pAhuXKJq9DdZwmBq-qLuj7XwlK3pwpjloHGZDiGLermzhkI8_erCZAs3ffWzb85yu5zzgQUOpoOUrA-qLsaFaEZJ1wd7sKnLouCcpQvCeKBjko8kQc-Gyn-9842AdVhjYJbeuAYYzIyFck1x2KrHxrbXXLynjLl2Vm77aDQz2jF3mQxLCVv94iNqnMEyWXVX1aEPeN_9Gf8k-rv8jJ4f6ol8wXgCC3bpvq7VcvVr0gjQwjgeKX4Z6nh8qdfAJhRfyCJzo836vOExeoZecP08xvv_xizDkrun6rr6AX7u8fXwmMNCmRNdW10_-aXZi1ZNAFyJFaO8ux-Z1LXGWlAxS0F29tOIlkZYfaUWvGnk2jtv0bcQzVeQTb_8y1uT4ahXF9ZeaKQkAK3fvXVmPpHHAnTpwkqfU5DLblefaxlSshonDoTwl_aNM1J8uLMYkiUeZV4jW6ZCk5q3f2waj4arQmWjnlfrQnanE_JBmxZUBrJJ89tFC2I2jeAqJpGCy6qldhj8u5iE97tdhJ8InM7E9QHXzJi_5_fXFW41nNK_8=w859-h775-no">https://lh3.googleusercontent.com/c8pAhuXKJq9DdZwmBq-qLuj7XwlK3pwpjloHGZDiGLermzhkI8_erCZAs3ffWzb85yu5zzgQUOpoOUrA-qLsaFaEZJ1wd7sKnLouCcpQvCeKBjko8kQc-Gyn-9842AdVhjYJbeuAYYzIyFck1x2KrHxrbXXLynjLl2Vm77aDQz2jF3mQxLCVv94iNqnMEyWXVX1aEPeN_9Gf8k-rv8jJ4f6ol8wXgCC3bpvq7VcvVr0gjQwjgeKX4Z6nh8qdfAJhRfyCJzo836vOExeoZecP08xvv_xizDkrun6rr6AX7u8fXwmMNCmRNdW10_-aXZi1ZNAFyJFaO8ux-Z1LXGWlAxS0F29tOIlkZYfaUWvGnk2jtv0bcQzVeQTb_8y1uT4ahXF9ZeaKQkAK3fvXVmPpHHAnTpwkqfU5DLblefaxlSshonDoTwl_aNM1J8uLMYkiUeZV4jW6ZCk5q3f2waj4arQmWjnlfrQnanE_JBmxZUBrJJ89tFC2I2jeAqJpGCy6qldhj8u5iE97tdhJ8InM7E9QHXzJi_5_fXFW41nNK_8=w859-h775-no</a>">
Rather than to screw directly into the aluminium which is quite soft and will strip after a few remove/replace cycles I used <a href="http://www.repairengineering.com/helicoil.html">Helicoils</a>. These spring-like stainless steel inserts screw into an over size tapped hole and have an internal thread which is the sized to fit your bolts, in my case M3. This allows me to remove/replace parts repeatedly with no loss of strength.</p>

<p><img class="<a" src="href="https://lh3.googleusercontent.com/mxZ73AzRrfBPjLWVYDDbv5QXiFLXV7Ul2kVtMclEaItexVyVK2Rtp7XnBV68tq3jDX-d28E2dgP10ZHA62TjGGEfirg29Y2u5hL96BqksC9nY3lv_SGaGOu2usswZ-fpkESVWluz9vtsKbMpqHOqti-MFkBe56R5FCs4-BQnT1EvMVTUnpEI1E8xve6REHZ8LbIbxTs2Ul_10bC6kMrRYG3jGsG5tcIvZME9d04d7pQNi9vExoCWFVUpEjTUAZ-HZFYtVL_p_LUlIhuMXj49s-kwoLt4LfFwfWOtyoOKzNd8S2dh2qr7zFF-DCWThRPrH3EKlUgsjR0ByD90vKhih8eyaaAYqznnU2bOCBOBK2STh7IxAYggrGqQU3gmdZk_7GWvWEpgTOE5wQ9D2Pi_bmOVgiWM_FUF879YV1WPig8SfWNM5zoUnsj-hhwho4QLYYPRD98C__A3Ob1xAtD80kkH38LCCmVvMv76_sZkqBZoudQVvJSrvz8_JKoPFgvaOhaEClKY-6w-XQ9LLNgzMSpOjrHr5aqChrOAM1k5uZA=w647-h731-no">https://lh3.googleusercontent.com/mxZ73AzRrfBPjLWVYDDbv5QXiFLXV7Ul2kVtMclEaItexVyVK2Rtp7XnBV68tq3jDX-d28E2dgP10ZHA62TjGGEfirg29Y2u5hL96BqksC9nY3lv_SGaGOu2usswZ-fpkESVWluz9vtsKbMpqHOqti-MFkBe56R5FCs4-BQnT1EvMVTUnpEI1E8xve6REHZ8LbIbxTs2Ul_10bC6kMrRYG3jGsG5tcIvZME9d04d7pQNi9vExoCWFVUpEjTUAZ-HZFYtVL_p_LUlIhuMXj49s-kwoLt4LfFwfWOtyoOKzNd8S2dh2qr7zFF-DCWThRPrH3EKlUgsjR0ByD90vKhih8eyaaAYqznnU2bOCBOBK2STh7IxAYggrGqQU3gmdZk_7GWvWEpgTOE5wQ9D2Pi_bmOVgiWM_FUF879YV1WPig8SfWNM5zoUnsj-hhwho4QLYYPRD98C__A3Ob1xAtD80kkH38LCCmVvMv76_sZkqBZoudQVvJSrvz8_JKoPFgvaOhaEClKY-6w-XQ9LLNgzMSpOjrHr5aqChrOAM1k5uZA=w647-h731-no</a>"></p>

<h3>Base Plate</h3>

<p>The base of the chassis is made out of 1.6mm thick aluminium sheet that is cut and bent into an &ldquo;L&rdquo; shape. This reduces the need for an awkward mounting system in the rear of the chassis where the motors will mount and also stiffens the chassis a bit. To mount the sides to the chassis base I made up some small aluminium blocks that had 5 helicoiled threaded holes. These mount to the chassis with 2 bolts, to the sides with 2 bolts and attach to the PCB with 1 nylon standoff.</p>

<p><img class="<a" src="href="https://lh3.googleusercontent.com/nbHAP4oXO_0pmydBpJG0NBb6aMRhANCBXabvg_MQ8-AwCWhbHe6Yg-SW52cIdrryj8dKYfTlgjuORFi5ZvLKduyVLhYXg99hg_f0PMlSN9eggfnzL2mXg70B5UCYmho-fE7VzgU4KzJTcJYPtXZrWROSyldP98FSnG_1bc0J8-3bB50jVhISgb3DeBNorR9s8X1cNUaGbZBfZq5wupdhmFjG3_G5skcKI6coKsu7F-dqJhOrp-N4dF3PxeI9G7zbZW0mWp6_nDGYCNjmt0Cd8LuBF7ktgXjQv9odcG0HVb3OEi5qZ3a0HfS-0nAJe6CYc15rJ3nxiBN-wkOLLhvYAOrOhZurfAFFXRi5ne_ao5_S6E6yxyk7F6N9yC3UCh82qDHoH7c2tqyLUy7Z4Xwyf7k_KZ67APq3Yr5hoLzf90k1a5v8zcAQ-hryspHPH9PFfkL_ujJ7sXFDZFra8nICJYQOFBNhcUf7-3_xLgXRxKEfurFxkxIuUPNfFgQ89m0cRFewrRX4vzMfAnZpjrLE6DbozMvpQt--7Tz5MBGuX9A=w990-h775-no">https://lh3.googleusercontent.com/nbHAP4oXO_0pmydBpJG0NBb6aMRhANCBXabvg_MQ8-AwCWhbHe6Yg-SW52cIdrryj8dKYfTlgjuORFi5ZvLKduyVLhYXg99hg_f0PMlSN9eggfnzL2mXg70B5UCYmho-fE7VzgU4KzJTcJYPtXZrWROSyldP98FSnG_1bc0J8-3bB50jVhISgb3DeBNorR9s8X1cNUaGbZBfZq5wupdhmFjG3_G5skcKI6coKsu7F-dqJhOrp-N4dF3PxeI9G7zbZW0mWp6_nDGYCNjmt0Cd8LuBF7ktgXjQv9odcG0HVb3OEi5qZ3a0HfS-0nAJe6CYc15rJ3nxiBN-wkOLLhvYAOrOhZurfAFFXRi5ne_ao5_S6E6yxyk7F6N9yC3UCh82qDHoH7c2tqyLUy7Z4Xwyf7k_KZ67APq3Yr5hoLzf90k1a5v8zcAQ-hryspHPH9PFfkL_ujJ7sXFDZFra8nICJYQOFBNhcUf7-3_xLgXRxKEfurFxkxIuUPNfFgQ89m0cRFewrRX4vzMfAnZpjrLE6DbozMvpQt--7Tz5MBGuX9A=w990-h775-no</a>"></p>

<h3>Chassis Front</h3>

<p>The front of the chassis is one large aluminium block to ensure that the front of the robot is kept down during high acceleration as well as to provide a ridgid mounting point for the sensors. Before I re-designed this block I bought some of the sensors I will use (Sharp GP2Y0D340K <a href="http://sharp-world.com/products/device/lineup/data/pdf/datasheet/gp2y0d340k_e.pdf">Datasheet</a>) and measured their range and detection pattern. I found that by spacing 3 sensors ~15&deg; apart I could cover a 90&deg; arc in front of the robot out to ~300mm.</p>

<p><img class="<a" src="href="https://lh3.googleusercontent.com/riwuDrohYvcXKN-hFAQCrDgvT2oJrJ95MEBCLVF6_VE6pfbb8rlx7RFsXXthNNBTUv83z3G-KW4wr6xj7zD0UkZtgBWSHd4SC93g1tMX9rAyG2kWgcmpsmdERbf3Xy5xBy9PwVtTgVAxTMPgbF4tMsIa6bryXcYvd_qVgz6Qp18raa7HpRgbpMYJ30DwH2TfnPNcYETzczX_0LlCDyjRQOqsfOmGa1I6hI6uGQorwB03ua1INMle8ByaRdYwimAx4shCI0tyzVDktOVizG4WTtwnOS5wbjaZEbIQjXsYCsv6QX49vYPr1CF2JdE0-ggHtC0VK25Eg7KlVDCBq-YQIrqO1mksgk-mk8FMTwXoYS-wSh6yCY6qEN0chrf0u5N16r184aPLNKb65r0bFm_nGgUpuygmF_A9YciB2loZNClqmvxEOs3N5hZC74hcZuoDg43UxDBWyM_PeXzXLT6CeCxvq5MC1LEEBvKw53g9ZLpq-6zq76w7oFZfxGZFL2cFNo1UjCmm7n7CQyviggab2fTUEaiYRqdJoEXUGQDbUR4=w1518-h775-no">https://lh3.googleusercontent.com/riwuDrohYvcXKN-hFAQCrDgvT2oJrJ95MEBCLVF6_VE6pfbb8rlx7RFsXXthNNBTUv83z3G-KW4wr6xj7zD0UkZtgBWSHd4SC93g1tMX9rAyG2kWgcmpsmdERbf3Xy5xBy9PwVtTgVAxTMPgbF4tMsIa6bryXcYvd_qVgz6Qp18raa7HpRgbpMYJ30DwH2TfnPNcYETzczX_0LlCDyjRQOqsfOmGa1I6hI6uGQorwB03ua1INMle8ByaRdYwimAx4shCI0tyzVDktOVizG4WTtwnOS5wbjaZEbIQjXsYCsv6QX49vYPr1CF2JdE0-ggHtC0VK25Eg7KlVDCBq-YQIrqO1mksgk-mk8FMTwXoYS-wSh6yCY6qEN0chrf0u5N16r184aPLNKb65r0bFm_nGgUpuygmF_A9YciB2loZNClqmvxEOs3N5hZC74hcZuoDg43UxDBWyM_PeXzXLT6CeCxvq5MC1LEEBvKw53g9ZLpq-6zq76w7oFZfxGZFL2cFNo1UjCmm7n7CQyviggab2fTUEaiYRqdJoEXUGQDbUR4=w1518-h775-no</a>"></p>

<h3>Skid and Sensors</h3>

<p>To keep the front of the robot from damaging the dohyo surface I machined a skid out of an engineering plastic called Delrin. This plastic is tough yet slippy so should be ideal for this. To detect the edge of the dohyo I added 2 edge sensors right on the front most edges of my robot. These should detect the transition from the black of the main dohyo surface to the white of the 25mm thick edge strip.</p>

<p><img class="<a" src="href="https://lh3.googleusercontent.com/8xJHOW9gUL3XZORE1a-S5kZxE-7Ya5FQIsBY55SDplvnGU4Nv68cOKtKQalN8MHI-9AiU1Jqla4rIKMM5f6vtxpeI3MAYAQt5hnXJqnH5FpzP-XVEnDuXTp0QIEHS2A-AGUAh4aMMzenN1RO5h_XLgqiOYUZ9V6GhOngDhpqfN16E3dcsxuF4yehOkY9eHs0DD7gbse_9I_KYH8L513iMVlIT0wD-Zs-Am0cndbeLgUcc64HDfU6kKYi0u5mYGORQYABaivSOQUsBwxUfvJL6eQXOBogRiNJynY1AKrlxBUz2gOrkXEqaZRaGaT0Aks0c6wuieo872XkLN4_U4N8xtsyxQRIqaKuYYmPVIS3Uml3eP-YW-sL-0fyQWPQXg0163kCE9K5WlG1JwhOOcmlu13gWsbmOaEOezLJFp4c8G-G75oPVQFRI6WXbt53LP5IT_MGgqN4z6IFCeDOgyruINXdsp5oS6RZJ3NwfbCelUtvEXh0GprIVJfFVjlL2-Zr4aotg-giQve6frx43ukFURkHHf2-xisXQ_T6ZuZVP4c=w905-h775-no">https://lh3.googleusercontent.com/8xJHOW9gUL3XZORE1a-S5kZxE-7Ya5FQIsBY55SDplvnGU4Nv68cOKtKQalN8MHI-9AiU1Jqla4rIKMM5f6vtxpeI3MAYAQt5hnXJqnH5FpzP-XVEnDuXTp0QIEHS2A-AGUAh4aMMzenN1RO5h_XLgqiOYUZ9V6GhOngDhpqfN16E3dcsxuF4yehOkY9eHs0DD7gbse_9I_KYH8L513iMVlIT0wD-Zs-Am0cndbeLgUcc64HDfU6kKYi0u5mYGORQYABaivSOQUsBwxUfvJL6eQXOBogRiNJynY1AKrlxBUz2gOrkXEqaZRaGaT0Aks0c6wuieo872XkLN4_U4N8xtsyxQRIqaKuYYmPVIS3Uml3eP-YW-sL-0fyQWPQXg0163kCE9K5WlG1JwhOOcmlu13gWsbmOaEOezLJFp4c8G-G75oPVQFRI6WXbt53LP5IT_MGgqN4z6IFCeDOgyruINXdsp5oS6RZJ3NwfbCelUtvEXh0GprIVJfFVjlL2-Zr4aotg-giQve6frx43ukFURkHHf2-xisXQ_T6ZuZVP4c=w905-h775-no</a>"></p>

<h3>Ascetics</h3>

<p>As plain aluminium is very shiny which will reflect infra-red light very well I will need to darken the exposed aluminium surfaces. Ideally I&rsquo;d anodize the aluminium however I don&rsquo;t think I&rsquo;ll get a great finish and it would be tricky to do myself. Instead I&rsquo;m planning to use a matt black vinyl wrap to cover the aluminium surfaces. This should be a simple process but should give a good finish.</p>

<p><img class="<a" src="href="https://lh3.googleusercontent.com/we3OpT9YxRbRFrPtlJLm-GDH9svQFboi_7H94g9kyqYHXnohRrzJcFg76C35Oic5ZkKtcXIKzIrTVAWXp3sKxRZHUHjNtUDpJ-L3AyaACKlVD2HTpMjUmnAA6kNgjgeTH9fNJEqSWSvvBaCckh22cnW1LIjaEyuKQaVu4iYbkNzKDWx9agDO__XL1tGl_ghH2PCTYOUYdwErDtryvikvLJavPTZ9EpHVUtyPWoDCH2iMLDkYAaVKfDSkyZBuAfVJXeEB7X9_pBDjSGnvnbslpDz0PdjwIfEuzEZ3g1nme3AAnTitQ_sETHYExbTLmn8yRT1jDb8QF8XUJdyUGxZRkKaeK7ly9M7k68wE0MfK_ezUR9trD6gDMl2F97_RI2wlxkENWflKefF27mHIeTmZkBRgLN5m16R8zMsj9NA5BDOc31ib0mIGc_PJKMcziJI38FiT1ikDL5_9lsKEZ0PopEDFjYp861SE7DYs6pP7W4WNj3lVs7l-re3JruMnHMTiIUcCwKdrQDbJfrwc7iMSQixn02NHDKeT2fHGE-WyVI8=w1319-h775-no">https://lh3.googleusercontent.com/we3OpT9YxRbRFrPtlJLm-GDH9svQFboi_7H94g9kyqYHXnohRrzJcFg76C35Oic5ZkKtcXIKzIrTVAWXp3sKxRZHUHjNtUDpJ-L3AyaACKlVD2HTpMjUmnAA6kNgjgeTH9fNJEqSWSvvBaCckh22cnW1LIjaEyuKQaVu4iYbkNzKDWx9agDO__XL1tGl_ghH2PCTYOUYdwErDtryvikvLJavPTZ9EpHVUtyPWoDCH2iMLDkYAaVKfDSkyZBuAfVJXeEB7X9_pBDjSGnvnbslpDz0PdjwIfEuzEZ3g1nme3AAnTitQ_sETHYExbTLmn8yRT1jDb8QF8XUJdyUGxZRkKaeK7ly9M7k68wE0MfK_ezUR9trD6gDMl2F97_RI2wlxkENWflKefF27mHIeTmZkBRgLN5m16R8zMsj9NA5BDOc31ib0mIGc_PJKMcziJI38FiT1ikDL5_9lsKEZ0PopEDFjYp861SE7DYs6pP7W4WNj3lVs7l-re3JruMnHMTiIUcCwKdrQDbJfrwc7iMSQixn02NHDKeT2fHGE-WyVI8=w1319-h775-no</a>"></p>

<p>As the electronics will be mounted on top of the motors &amp; aluminium blocks I need a top cover to protect them. I&rsquo;ve decided that I will laser cut a 3mm translucent acrylic top with holes for buttons. This should looks good and provide enough protections from falls to the electronics.</p>

<p><img class="<a" src="href="https://lh3.googleusercontent.com/dYGSnaswpgcf1U5CH-3ptO27Euulmi0rRaYMPJu21bjcYRmr7j-zxCveLl-6at2So3_NfIw7JB5v7IK82AxloS_T9W1wOBfa8uU3qtShIwq5ST-IIIPkXIkFBYvE5cYxewbFj0Sh3atmLkgI-zU8dLg81S4CEeciqlfVaFeB6Swqd-6BEW3sKaZafA-Pk8Dzj0ZjM419H3eGEY8-7buTluDoNw1DK4sBahUBVX_eNo46boTVtpGeCeKoavF_JAAprJaX2zTg-UPtbkXZSY9ah1rlhwv_UhaEOIo7Xge3RDHgFVuLI_kRPAlYrqCgqSbp-9xh8q2lwRMKlff-qi_D1wP1094_FRHCvOrQZXC3eD7_jpgYb2H1yHplTgotF2qi35Kcpo4WDjrx8mqhBnsJhX6cEGfrHk60X1O_7r9ZAsr3KR3MjNaRKr0S4pADB26eh0ZsXva9mnh89uhNNUA7VZvDqLczDp1wNa1P_bDnMOQEPwl-cXvsebCR9WIW5BfsiSnG-0qI_kzsJTO_rqcLjjxAiUkREewuuS2auiYvxC4=w1027-h775-no">https://lh3.googleusercontent.com/dYGSnaswpgcf1U5CH-3ptO27Euulmi0rRaYMPJu21bjcYRmr7j-zxCveLl-6at2So3_NfIw7JB5v7IK82AxloS_T9W1wOBfa8uU3qtShIwq5ST-IIIPkXIkFBYvE5cYxewbFj0Sh3atmLkgI-zU8dLg81S4CEeciqlfVaFeB6Swqd-6BEW3sKaZafA-Pk8Dzj0ZjM419H3eGEY8-7buTluDoNw1DK4sBahUBVX_eNo46boTVtpGeCeKoavF_JAAprJaX2zTg-UPtbkXZSY9ah1rlhwv_UhaEOIo7Xge3RDHgFVuLI_kRPAlYrqCgqSbp-9xh8q2lwRMKlff-qi_D1wP1094_FRHCvOrQZXC3eD7_jpgYb2H1yHplTgotF2qi35Kcpo4WDjrx8mqhBnsJhX6cEGfrHk60X1O_7r9ZAsr3KR3MjNaRKr0S4pADB26eh0ZsXva9mnh89uhNNUA7VZvDqLczDp1wNa1P_bDnMOQEPwl-cXvsebCR9WIW5BfsiSnG-0qI_kzsJTO_rqcLjjxAiUkREewuuS2auiYvxC4=w1027-h775-no</a>"></p>

<h2>Electronics</h2>

<p>The main change has been the PCB shape, in order to fit the battery the PCB is now a &ldquo;U&rdquo; shape with angled cut outs for the sensors. Unfortunately as this is a small PCB with lots of components and some very narrow places I&rsquo;m still trying to route tracks.</p>

<p><img class="<a" src="href="https://lh3.googleusercontent.com/7LMcQres7WRcjQ8CMgLH8fArR8JMIkmzyOYs_VsSHftFbuleA0YhpCVE9hPrmbEl5ANVvvvI7utjY84rbn1CtljAbd55wjVFYxvNbPbWXlHBOA8J_kOV6Qn1-djhU1zzmFcJV7Lf2LXQDP9t9ShjJJxYdn--SktIFi_jVibxAP9XiFdtBVEXrSIbZ2Kr1TtjlYlmD2hkcxeo2fpoxilp5rB5_rMuaUsDsg7PaNTaW02PPkaaJktHvVq7_2Mgx0aVlxok96Frl5l74VhR6Yrre152lfx2q7OkK9h0BhMgA1-letXeuWKSFlYYx3uN6U27Q_FuGvaUYO24mVjbYWbFBGAd2ykekcsc7xlI1Q556XVEaNFBSffL2D5cKj-Rbqi7fv5m58hGgaPKuekrOxdMcHxVgj2TrB5eE50YE0CpKtKM__ByhozFuJO3XI2CpINCdW3L3WLgbfhGw0WR47o4KxW8JTqU3gR0zZPHn8VrlUdIGr8Uks66SNxgLiu8dBAcrHgTQzDN5H1dL42uiyvZvIAn7FaTp8e3RWSdhiOJwSw=w1209-h731-no">https://lh3.googleusercontent.com/7LMcQres7WRcjQ8CMgLH8fArR8JMIkmzyOYs_VsSHftFbuleA0YhpCVE9hPrmbEl5ANVvvvI7utjY84rbn1CtljAbd55wjVFYxvNbPbWXlHBOA8J_kOV6Qn1-djhU1zzmFcJV7Lf2LXQDP9t9ShjJJxYdn--SktIFi_jVibxAP9XiFdtBVEXrSIbZ2Kr1TtjlYlmD2hkcxeo2fpoxilp5rB5_rMuaUsDsg7PaNTaW02PPkaaJktHvVq7_2Mgx0aVlxok96Frl5l74VhR6Yrre152lfx2q7OkK9h0BhMgA1-letXeuWKSFlYYx3uN6U27Q_FuGvaUYO24mVjbYWbFBGAd2ykekcsc7xlI1Q556XVEaNFBSffL2D5cKj-Rbqi7fv5m58hGgaPKuekrOxdMcHxVgj2TrB5eE50YE0CpKtKM__ByhozFuJO3XI2CpINCdW3L3WLgbfhGw0WR47o4KxW8JTqU3gR0zZPHn8VrlUdIGr8Uks66SNxgLiu8dBAcrHgTQzDN5H1dL42uiyvZvIAn7FaTp8e3RWSdhiOJwSw=w1209-h731-no</a>"></p>

<!-- picture of paper cutout -->


<h3>Power handing</h3>

<p>One key aspect of the chassis redesign was the dimensions of the battery. The battery is a key component of the mini-sumo as without it nothing will run. I&rsquo;ve now decided to use Venom 10C 3 cell LiPoly batteries and have bought 2 to allow one to charge while one is being used. They&rsquo;re quite popular so there should be a ready supply of spares if required. They weigh 45grams and their dimensions are 68mm x 26mm x 18mm. It is important to note that a fully charged 3 cell LiPoly battery will have a pack voltage of 12.6V.</p>

<p><img class="<a" src="href="https://lh3.googleusercontent.com/eqvBvWKCNpvLsv-TZxV9MMhstYHczOxtjD-vj_1wFzDmnxcni64dERu76yQ8iTJrbOIzr9_-Cgw_SXFhgcwFJWygNiLtrYivcunIx_P9TpJpwOkAOcUJi_1s_Jtjv9lPkFnEwM_DP_2IAu-aLIb7-NHmsR6SWiaY9k6gV8JCguuMcPb1KLsn4G-WV2DIwbZUjR5GTD0Jc2hA35e4dW4eLtTnnwXBk03f7_fAD4WwrSm3BfauJZRVCrFiFY_80uRNirucsAi2adZJeHF1d7isqmGcbhBgVdc8osWEkZl-poo6OxGXGtRd9lI55mPe6sPdgPiQWhr1UXe04Vk8MVmbSx0RaNcOln0anmcX26sENU7MH5a3t8oX04tDOOmk-UsAfBkLnVRwXqCdQH6-RKuBSXV2DYH5WQxVF4NFiLD-_4JPzdigoIKE9F2vu4rEeWvmkOdyE8dSQqouHWz1k0H4QDg2yyhrhsafkMcz9mKXdtHUIv9q1u3FL8X0KeuOo8t1FHq3twtlbCqHgHmbmkPDA9SGPCK0WQyuHKrkHlZQE6c=s500-no">https://lh3.googleusercontent.com/eqvBvWKCNpvLsv-TZxV9MMhstYHczOxtjD-vj_1wFzDmnxcni64dERu76yQ8iTJrbOIzr9_-Cgw_SXFhgcwFJWygNiLtrYivcunIx_P9TpJpwOkAOcUJi_1s_Jtjv9lPkFnEwM_DP_2IAu-aLIb7-NHmsR6SWiaY9k6gV8JCguuMcPb1KLsn4G-WV2DIwbZUjR5GTD0Jc2hA35e4dW4eLtTnnwXBk03f7_fAD4WwrSm3BfauJZRVCrFiFY_80uRNirucsAi2adZJeHF1d7isqmGcbhBgVdc8osWEkZl-poo6OxGXGtRd9lI55mPe6sPdgPiQWhr1UXe04Vk8MVmbSx0RaNcOln0anmcX26sENU7MH5a3t8oX04tDOOmk-UsAfBkLnVRwXqCdQH6-RKuBSXV2DYH5WQxVF4NFiLD-_4JPzdigoIKE9F2vu4rEeWvmkOdyE8dSQqouHWz1k0H4QDg2yyhrhsafkMcz9mKXdtHUIv9q1u3FL8X0KeuOo8t1FHq3twtlbCqHgHmbmkPDA9SGPCK0WQyuHKrkHlZQE6c=s500-no</a>"></p>

<p>As the motors will be separated by the battery it will be hard to route a single motor controller chip like the <a href="http://toshiba.semicon-storage.com/info/lookup.jsp?pid=TB6612FNG&amp;lang=en">TB6612FNG</a> to both motors. Thus I have chosen to use  separate motor drivers, however I also need the motor driver chips to be compact as I do not have much space on the PCB. The motor chips I have chosen are Texas Instruments <a href="http://www.ti.com/product/drv8838">DRV8838</a> however these motor driver chips cannot handle power supplies of greater than 11Volts. To protect the DRV8838s I&rsquo;ve placed a large diode in series with the battery that has a Vfwd of 1.6Volts which should drop the voltage satisfactorily.</p>

<p>Another problem is that while the motors will be running at 11Volts, the GP2Y0D340K sensors require 5Volts to work, and the rest of the logic requires 3.3Volts to work. I decided to solve this by using a switch mode power supply to convert the battery Voltage down to a stable 5Volts for the range sensors and then I am using a linear regulator to convert from 5Volts down to 3.3Volts. This minimises the board space required while maintaining a high efficiency. This should cost too much nor generate too much heat.</p>

<h3>Sensors</h3>

<p>The GP2Y0D340K range sensors will plug into turned pin sockets mounted directly to PCB at the right 15&deg; angles. This allows me to change sensors if they get damaged but also provides a secure method of fastening them to the chassis via the PCB.</p>

<p>The <a href="https://www.sparkfun.com/products/9454">QRE1113</a> floor sensors will be mounted in Sparkfun breakout boards which bolt to the front block as seen in the picture above. They will have wire pigtails that connect to the PCB via tiny 3way JST <a href="http://www.jst-mfg.com/product/detail_e.php?series=231">SH</a> connectors. I&rsquo;ve still not quite decided where on the PCB these will mount but they don&rsquo;t take up much room at all.</p>

<h3>Interfacing</h3>

<p>As this is an autonomous combat robot I will need to change the code regularly to alter and improve tactics. The best way to do this is by including an ARM <a href="http://developer.mbed.org/">mbed</a> compatible chip that can be programmed via a built in USB bootloader. The NXP <a href="http://www.nxp.com/products/microcontrollers/cortex_m3/lpc1300/#overview">LPC1347</a> ARM Cortex-M3 microcontroller fits these requirements perfectly. To avoid cutting holes in the chassis the USB connector is placed pointing forwards between 2 of the range sensors. The buttons to reset and put the chip into bootloader mode will peek out through laser cut holes in the acrylic top cover.</p>

<!-- image of USB port -->


<p>To provide detailed status information I&rsquo;ve added a monochrome 128px x 32px I<sup>2</sup>C <a href="http://www.adafruit.com/products/931">OLED screen</a> to the PCB. This currently shows battery and build information on boot up and then motor and sensor status during the match.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mini-Sumo Claymore]]></title>
    <link href="http://wiresandbits.co.uk/blog/2013/09/22/mini-sumo-claymore/"/>
    <updated>2013-09-22T14:39:00+01:00</updated>
    <id>http://wiresandbits.co.uk/blog/2013/09/22/mini-sumo-claymore</id>
    <content type="html"><![CDATA[<p>Whilst visiting the Birmingham <a href="https://www.bcu.ac.uk/tee/events/techfest">TechFest</a> in 2011 with a few classmates from university I saw people with small autonomous robots, the robots were attempting to push each other out of a black circle. It turned out that this was a mini-sumo competition. The robots had to be autonomous, weight less than 500 grams and must fit in a 100mm cube. This sounded like an interesting challenge so I have tried to make my own.</p>

<!-- youtube a video of a competition -->


<h3>Rules</h3>

<p>The official rules are listed <a href="http://www.tic.ac.uk/micromouse/RULES/MiniSumoRules.pdf">here in PDF</a> however the important points are:</p>

<ul>
<li>Matches take place in a Dohyo

<ul>
<li>This is a circular arena with a diameter of 77 centimetres painted black</li>
<li>It has a white line on the border 2.5 centimetres wide</li>
<li>There is nothing else surrounding the Dohyo for at least 50 centimetres</li>
</ul>
</li>
<li>The robot must:

<ul>
<li>Fit in a box 10 centimetres wide and 10 centimetres deep, there is no height restriction</li>
<li>It must not weight more than 500 grams</li>
<li>Autonomous robots must begin a match 5 seconds after a button is pressed</li>
<li>No jammers or damaging weapons allowed

<ul>
<li>But a flipper is not ruled out&hellip;</li>
</ul>
</li>
</ul>
</li>
</ul>


<h2>Objectives</h2>

<p>Like The Unnamed I&rsquo;ve set down some initial starting goals:</p>

<ul>
<li>It must weight 500 grams</li>
<li>Fit inside the 100 mm cube</li>
<li>Try and be less than 30mm high</li>
<li>I want to focus on intelligence rather than brute force

<ul>
<li>But it helps to have brute force too</li>
</ul>
</li>
<li>Use 2 opponent sensors and 2 edge sensors</li>
<li>Use &lsquo;modern&rsquo; construction methods

<ul>
<li>This includes 3D printers and laser cutters</li>
</ul>
</li>
</ul>


<h2>Parts</h2>

<p>I started by collecting some parts for the robot. Normally I try and fully design a robot before ordering parts, this stops me from wasting money on things that won&rsquo;t fit with the final design, however more often than now I find myself never quite finishing it. This time I decided that as the robot will be rather small I may as well buy parts that look like they&rsquo;ll fit and then design a chassis around them.</p>

<h3>Drive System</h3>

<p>I figured the first step would be to organise a decent drive system after all the point of this robot is to push other robots out of the ring, it needs to be a solid system as it is my only offensive weapon. I started by trying to find motors from Faulhaber or Maxxon, both very high quality, very high cost precision motors. Googling for Faulhaber lead me to a <a href="http://www.robotroom.com/FaulhaberGearmotor.html">Robot Room</a> post which then lead me to a surplus website selling them <a href="http://www.voti.nl/shop/catalog.html?MOT-20-2">here</a>. A couple of important things to note about these motors which made them ideal; they have pre-built right angle gearboxes already attached, they have encoders mounted on the rear to count rotations and while they&rsquo;re rated for 6 Volts they seem capable of handling ~12 Volts.</p>

<p>I&rsquo;m planning to run the motors in a closed loop control system, this means that rather than setting a PWM value as is the standard I will instead set a counts per interval then the code will attempt to match that value by varying the speed of the motor. This means that should something slow me down, either battery levels draining or an opponent in front of me the controller will increase the PWM value until the counts per interval matches. The only downside to this method is that it is more complex and requires a decently powerful microcontroller, however I was planning to add one anyway so this is acceptable.</p>

<p>The motors at 6 Volts only rotate 80 times a minute or 1.3 times a second which is not very quick at all, if I instead run these motors at 12 Volts then I should get 170 Rotations per Minute (RPM) or 2.8 times a second. This is much better and coupled with the right wheels will make for a fast robot. To provide this 12 Volts I need a powerful but compact battery, I&rsquo;m not too concerned about weight, but the smaller I can make my robot the harder it will be to sense. With that in mind I&rsquo;ve chosen a Lithium Polymer (LiPoly) battery made up of 3 cells for a battery voltage of +11.1 Volts and a capacity of 800 milliamp hours, it measures 75mm x 23mm x 15mm and weights under 63 grams.</p>

<p>The final component of the drive system are the wheels. I want a robot that is around 30mm high so cannot choose wheels larger than that, they also need to maintain good grip on the floor to help push other robots around. I ended up buying a pair of Solarbotics <a href="http://www.technobotsonline.com/solarbotics-rw2-aluminium-wheel-for-3mm-axle.html">RW2 wheels</a>. These have a diameter of 31.2mm which translates to a top speed of 277 mm per second which would be fast enough for this purpose.</p>

<h3>Sensors</h3>

<p>The robot will require 2 types of sensors, one set to detect opponents and manoeuvre them off the edge of the Dohyo and another set to detect the edge of the Dohyo and avoid it.</p>

<p>The distance sensors should have a long range, but to avoid detecting things outside the Dohyo the maximum range must be limited to 50 centimetres + 2.5 centimetres = 52.5 centimetres but should be more than 77 centimetres  &ndash; 10 centimetres &ndash; 10 centimetres = 57 centimetres to ensure that the opponent can be sensed at all ranges. The minimum range should be as close to 0 centimetres as possible to avoid missing the opponent when it is directly in front. The (IR) distance sensors from Sharp are very popular as they fit nicely into this range bracket. I&rsquo;ve chosen the <a href="http://sharp-world.com/products/device/lineup/data/pdf/datasheet/gp2y0d340k_e.pdf">GP2Y0D340K</a> as it has a minimum range of 1.5 centimetres and a maximum range of 40-42.5 centimetres. The maximum range should be acceptable as the robot will be moving around as it scans for the opponent which will reduce the chances of the worst case scenario happening.</p>

<p>The edge detection sensors don&rsquo;t need quite so much range but they need to detect the change from the black Dohyo floor to the white edge border cleanly. The edge sensors I choose will need to sense the change quickly, if the robot is travelling at its top speed of 277 millimetres per second then the robot has 1.1 seconds to come to a halt to avoid driving off the edge. The popular sensors for this task are the <a href="http://www.vishay.com/docs/83752/tcrt1000.pdf">TCRT1000</a> from Vishay. The TCRT1000 combines an Infra-Red (IR) transmitter receiver pair in a single package, correctly biased they be set up to give a digital output that ranges when the border is detected, this can then set off an interrupt to stop the robot.</p>

<h3>Logic</h3>

<p>To control the robot I will need some logic to receive inputs, process them and then act upon them, as I want the strength of my robot to be the processor this is where I need to choose a fast and powerful microcontroller. I will use the faster microcontroller to get inside my opponents Observe, Orientate, Decide, Act loop (<a href="http://en.wikipedia.org/wiki/OODA_loop">OODA</a>), this is done by cycling through the loop faster than the opponent, causing the opponent to act upon a situation that has already changed.</p>

<p>For fast powerful microcontrollers that are still compact the ARM architecture is the most prevalent and of these I have the most experience with the <a href="http://www.nxp.com/products/microcontrollers/cortex_m3/LPC1343FBD48.html">LPC1343</a>. This will be a good choice as it has enough input/output pins for the robot and runs at 72 Megahertz which will allow it to react quickly to changes in its environment. Unfortunately it does not have any non-volatile memory so I may have to include an external EEPROM chip to provide the memory that will exist between power cycles.</p>

<p>The motors will require a specialised chip to drive them as the microcontroller outputs will not be sufficient. This chip will need to work with a +11.1 Volt supply from the battery for the motors and accept control signals  that are +3.3 Volts. The motors will pull approximately 0.4 Amps when stalled so the chip ideally needs to be able to handle approximately 1 Amp of current to be safe. There are a few available chips such as the <a href="http://www.toshiba-components.com/docs/linear/TB6612FNG_en_datasheet.pdf">TB6612FNG</a> or the <a href="www.allegromicro.com/~/Media/Files/Datasheets/A4950-Datasheet.ashx">A4950</a> I will choose a suitable one as the space constraints are discovered.</p>

<p>The LPC1343 requires a +3.3 Volt power supply, the sensors require a +5 Volt power supply, I have a +11.1 Volts battery on my robot, this means I will need to include 2 stages of regulation, one to +5V and another to +3V3. The best way to drop the +11.1 Volts down to +5 Volts is to use a Switch Mode Power Supply (SMPS), these are typically very efficient and generate very little heat. I will then use a linear regulator to drop from +5 Volts down to +3.3 Volts this will give me a very stable, noise free supply for the sensitive microcontroller.</p>

<h3>Chassis</h3>

<p>These disparate parts require a chassis to act as glue holding them together. As none of the robots opponents will be able to cause physical damage there is no need to armour my robot however the chassis will need to be stiff enough to withstand pushing and being pushed by other robots. By making at low as possible I reduce the cross sectional area that an opponent can detect, depending on my opponents sensors I can also construct my robot to further reduce my chances of being detected. For robots that use sonar sensors I can either deflect the ultrasound or absorb it to reduce the returned ultrasound levels, for IR sensors I can do the same but with different materials. I however will not construct my robot to take advantage of this in the first mini-sumo, however for my next robot I may look into &ldquo;stealth&rdquo; techniques.</p>

<p>The minimum height I can build my robot is set by my wheels, 31.2mm, the minimum width of my robot is set by the width of 2 wheels, 2 motors and the battery, 87mm, the minimum length of my robot is set by the length of the motors, 72mm. The total weight of those 5 components is ~200 grams. This means I have approximately 300 grams to fit the logic circuitry, sensors and chassis in. To accurately plan how I would do this I used SketchUp as a Computer Aided Design (CAD) program, it&rsquo;s not as functional as Solidworks or AutoCAD but it is far easier to use.</p>

<p>After many design ideas and tweaks I came up with an idea:
<img class="<a" src="href="https://lh6.googleusercontent.com/-TnAG8U0xAqc/Uj9I1sREXNI/AAAAAAAACro/a-_sV7KKI7o/w866-h755-no/Claymore_front_iso_v4.1.png">https://lh6.googleusercontent.com/-TnAG8U0xAqc/Uj9I1sREXNI/AAAAAAAACro/a-_sV7KKI7o/w866-h755-no/Claymore_front_iso_v4.1.png</a>"></p>

<p>It was to be built out of laser cut 6mm plastic, ideally Delrin, Acetal, or Polycarbonate (preferably not acrylic) using Pettis joints to hold it together with hex cap screw and square nuts. These joins have proven them selves to be very rigid and very easy to cut out with a laser cutter.</p>

<p><img class="<a" src="href="https://lh3.googleusercontent.com/HVLwRU5L3vmTO_1dLBvSWOXqMmJwF2gdlz_CROpXohg=w663-h498-no">https://lh3.googleusercontent.com/HVLwRU5L3vmTO_1dLBvSWOXqMmJwF2gdlz_CROpXohg=w663-h498-no</a>"></p>

<p>The motors, not having any mounting attachments, would be zip-tied in custom 3D printed motor clips which had nut traps so they could be bolted onto the top plate of the chassis. This would form a monocoque structure which would be easy to fabricate, construct and dismantle for repairs/upgrades.</p>

<p><img class="<a" src="href="https://lh4.googleusercontent.com/-vRsUFuJQyCU/Uj9I1n4VsiI/AAAAAAAACrg/CcDRTmb8KPA/w994-h835-no/Claymore_rear_iso_v4.1.png">https://lh4.googleusercontent.com/-vRsUFuJQyCU/Uj9I1n4VsiI/AAAAAAAACrg/CcDRTmb8KPA/w994-h835-no/Claymore_rear_iso_v4.1.png</a>"></p>

<p>To aid in the pushing of opponents a metal plate was added, this had a lip on the front that would protrude out and down. The idea being that as an opponent was found, engaged and pushed the lip would get underneath the opponent and raise their wheels reducing the contact with the ground degrading the grip.</p>

<h2>Testing</h2>

<p>Once version 1 of the chassis was laser cut and the parts installed the first problem was noted, the chassis was in fact cut out of 5mm acrylic, the design was for 6mm plastic. This difference was enough to completely ruin the strength of the structure however it was acceptable enough for testing. Another initial problem was that I was already using my LPC1343 <a href="http://www.universalair.co.uk/control/forebrain">development board</a> in another project and could not remove it however I had recently bought a <a href="http://www.pjrc.com/store/teensy3.html">Teensy 3</a> from the <a href="http://www.kickstarter.com/">Kickstarter</a>. To control the motors I use a TB6612FNG <a href="https://www.sparkfun.com/products/9457">breakout board</a> I had available.</p>

<p><img class="<a" src="href="https://lh5.googleusercontent.com/-kgKjf0jEcWQ/Uj78qt4TjJI/AAAAAAAACq4/GfYSNinDPf8/w1358-h766-no/2013-08-09+07.45.00.jpg">https://lh5.googleusercontent.com/-kgKjf0jEcWQ/Uj78qt4TjJI/AAAAAAAACq4/GfYSNinDPf8/w1358-h766-no/2013-08-09+07.45.00.jpg</a>"></p>

<p>I connected everything up, wrote a quick program to control the motors and loaded it onto the Teensy 3. The first problem was the amount of noise that came from the motors, I thought something had gone horribly wrong, they shouldn&rsquo;t be that loud! Looking at the information on the Teensy 3&rsquo;s PWM it turns out the default frequency is 488.28 Hertz, this is far too slow and is well with in the human audible range. I changed the frequency to 18 kilohertz this is at the very top end of the audible frequency range and reduced the noise completely.
I&rsquo;ve started to implement the code to read the number of counts per interval however I&rsquo;ve yet to verify the numbers nor do anything useful with them.</p>

<p>``` cpp Claymore test code for Teensy 3
/<em> Pin Map </em>/</p>

<h1>define MOTOR_L_IN_1    16</h1>

<h1>define MOTOR_L_IN_2    15</h1>

<h1>define MOTOR_L_PWM     22</h1>

<h1>define MOTOR_STBY      14</h1>

<h1>define MOTOR_R_IN_1    17</h1>

<h1>define MOTOR_R_IN_2    18</h1>

<h1>define MOTOR_R_PWM     23</h1>

<h1>define MOTOR_L_A       11</h1>

<h1>define MOTOR_L_B       12</h1>

<h1>define MOTOR_R_A       2</h1>

<h1>define MOTOR_R_B       3</h1>

<h1>define LED_STATUS      13</h1>

<h1>define SENSOR_OPP_L    0</h1>

<h1>define SENSOR_OPP_R    0</h1>

<h1>define SENSOR_FLR_L    0</h1>

<h1>define SENSOR_FLR_R    0</h1>

<h1>define RUN             0</h1>

<p>/<em> Global Variables </em>/
volatile unsigned long leftCounter = 0x00000000UL;
volatile unsigned long rightCounter = 0x00000000UL;
volatile char oldLeft, oldRight, newLeft = 0, newRight = 0;
static char encoderQuadrature[16] = {0,-1,1,2,1,0,2,-1,-1,2,0,1,2,1,-1,0};</p>

<p>/<em> Global Functions </em>/
void leftMotorA(void) {
  oldLeft = newLeft;
  newLeft = (digitalRead(MOTOR_L_A) * 2) + digitalRead(MOTOR_L_B);
  leftCounter += encoderQuadrature[(oldLeft * 4) + newLeft];<br/>
}</p>

<p>void leftMotorB(void) {
  oldLeft = newLeft;
  newLeft = (digitalRead(MOTOR_L_A) * 2) + digitalRead(MOTOR_L_B);
  leftCounter += encoderQuadrature[(oldLeft * 4) + newLeft];
}</p>

<p>void rightMotorA(void) {
  oldRight = newRight;
  newRight = (digitalRead(MOTOR_R_A) * 2) + digitalRead(MOTOR_R_B);
  rightCounter += encoderQuadrature[(oldRight * 4) + newRight];
}
void rightMotorB(void) {
  oldRight = newRight;
  newRight = (digitalRead(MOTOR_R_A) * 2) + digitalRead(MOTOR_R_B);
  rightCounter += encoderQuadrature[(oldRight * 4) + newRight];
}</p>

<p>void getMotorSpeed(int &amp;leftSpeed, int &amp;rightSpeed) {
  static unsigned long elapsed = 0x00000000UL;
  unsigned int localLeftCounter = leftCounter;
  unsigned int localRightCounter = rightCounter;
  leftCounter = 0x00UL;
  rightCounter = 0x00UL;
  elapsed = micros() &ndash; elapsed;
  leftSpeed = (localLeftCounter * 60000000)/elapsed;
  rightSpeed = (localRightCounter * 60000000)/elapsed;
  return;
}</p>

<p>void setMotorSpeed(int leftSpeed, int rightSpeed) {
  if(leftSpeed > 0)
  {</p>

<pre><code>digitalWrite(MOTOR_L_IN_1, LOW);
digitalWrite(MOTOR_L_IN_2, HIGH);
</code></pre>

<p>  }
  else if(leftSpeed &lt; 0)
  {</p>

<pre><code>digitalWrite(MOTOR_L_IN_1, HIGH);
digitalWrite(MOTOR_L_IN_2, LOW);
</code></pre>

<p>  }
  else
  {</p>

<pre><code>digitalWrite(MOTOR_L_IN_1, HIGH);
digitalWrite(MOTOR_L_IN_2, HIGH);
</code></pre>

<p>  }
  analogWrite(MOTOR_L_PWM, leftSpeed);</p>

<p>  if(rightSpeed > 0)
  {</p>

<pre><code>digitalWrite(MOTOR_R_IN_1, LOW);
digitalWrite(MOTOR_R_IN_2, HIGH);
</code></pre>

<p>  }
  else if(rightSpeed &lt; 0)
  {</p>

<pre><code>digitalWrite(MOTOR_R_IN_1, HIGH);
digitalWrite(MOTOR_R_IN_2, LOW);
</code></pre>

<p>  }
  else
  {</p>

<pre><code>digitalWrite(MOTOR_R_IN_1, HIGH);
digitalWrite(MOTOR_R_IN_2, HIGH);
</code></pre>

<p>  }
  analogWrite(MOTOR_R_PWM, rightSpeed);</p>

<p>  return;
}</p>

<p>void setup(void) {
  Serial.begin(115200);</p>

<p>  pinMode(MOTOR_L_IN_1, OUTPUT);
  pinMode(MOTOR_L_IN_2, OUTPUT);
  pinMode(MOTOR_L_PWM, OUTPUT);
  pinMode(MOTOR_R_IN_1, OUTPUT);
  pinMode(MOTOR_R_IN_2, OUTPUT);
  pinMode(MOTOR_L_PWM, OUTPUT);
  pinMode(MOTOR_STBY, OUTPUT);
  pinMode(LED_STATUS, OUTPUT);
  pinMode(MOTOR_L_A, INPUT);
  pinMode(MOTOR_L_B, INPUT);
  pinMode(MOTOR_R_A, INPUT);
  pinMode(MOTOR_R_B, INPUT);
  pinMode(SENSOR_OPP_L, INPUT);
  pinMode(SENSOR_OPP_R, INPUT);
  pinMode(SENSOR_FLR_L, INPUT);
  pinMode(SENSOR_FLR_R, INPUT);
  pinMode(RUN, INPUT_PULLUP);</p>

<p>  digitalWrite(MOTOR_L_IN_1, LOW);
  digitalWrite(MOTOR_L_IN_2, LOW);
  digitalWrite(MOTOR_L_PWM, LOW);
  digitalWrite(MOTOR_R_IN_1, LOW);
  digitalWrite(MOTOR_R_IN_2, LOW);
  digitalWrite(MOTOR_R_PWM, LOW);
  digitalWrite(MOTOR_STBY, LOW);
  digitalWrite(LED_STATUS, LOW);</p>

<p>  attachInterrupt(MOTOR_L_A, leftMotorA, CHANGE);
  attachInterrupt(MOTOR_L_B, leftMotorB, CHANGE);
  attachInterrupt(MOTOR_R_A, rightMotorA, CHANGE);
  attachInterrupt(MOTOR_R_B, rightMotorB, CHANGE);</p>

<p>  analogWriteFrequency(MOTOR_L_PWM, 18000);</p>

<p>}</p>

<p>void loop(void) {
  int left, right;</p>

<p>  digitalWrite(MOTOR_STBY, HIGH); // enable motors
  setMotorSpeed(200, 200);</p>

<p>  while(1)
  {</p>

<pre><code>getMotorSpeed(left, right);
Serial.print("\f\rCounts/minute is: ");
Serial.print(right, DEC);
digitalWrite(LED_STATUS, !digitalRead(LED_STATUS));
delay(2000);
</code></pre>

<p>  }
}
```</p>

<h2>Next Steps</h2>

<p>The next steps forward from this point would be to sort out the chassis, either re-design it to take advantage of 5mm plastics or get it cut from 6mm plastic. Once I&rsquo;ve finalised my chassis design and actually have it I then can finish the logic board layout and get it sent off to be manufactured. Another step I can take in parallel would be see about implementing the closed loop control in the Teensy 3 or using my LPC1343 development board. I&rsquo;m planning on running this robot at the June 2014 Birmingham Tech Fest so I&rsquo;ll consider May 2014 to be my final deadline for a completed robot.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[*tock tock* Is this thing on?]]></title>
    <link href="http://wiresandbits.co.uk/blog/2013/09/11/star-tock-tock-star-is-this-thing-on/"/>
    <updated>2013-09-11T20:26:00+01:00</updated>
    <id>http://wiresandbits.co.uk/blog/2013/09/11/star-tock-tock-star-is-this-thing-on</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve decided to start a blog. I have lots of creative ideas and keep starting projects but never quite finish them. I&rsquo;m hoping that by writing about them I&rsquo;ll end up finishing more of them, or at least getting them to a finished-ish state. So with out further ado&hellip;</p>

<h2>Active projects</h2>

<h3>Makerbot Cupcake-o-Matic</h3>

<p>This is my fairly successful attempt to convert my non-working <a href="http://www.makerbot.com/">Makerbot</a> <a href="http://www.makerbot.com/support/cupcake/">Cupcake</a> into a working reliable 3D printer. I&rsquo;ve largely finished this, it just needs the wires hiding to neaten the external appearance, of course it&rsquo;s not quite as simple as that but I&rsquo;ll save that for a subsequent post.</p>

<h3>Prusa i3</h3>

<p>Whilst the Cupcake-o-Matic works, and fairly reliable at that it does only have a 100mm x 100mm x 100mm build volume with a single extruder it&rsquo;s not very expandable. I do want to print large objects in multiple materials and so I began to construct a single sheet style <a href="http://reprap.org/wiki/Prusa_i3">Prusa i3</a>. I have nearly all of the parts but I still need to print some and design some.</p>

<h3>The Unnamed featherweight</h3>

<p>I&rsquo;ve been interested in combat robots since Robot Wars came out in 1998. I tried my hand at building a featherweight (12Kg max) class robot whilst at secondary school but it didn&rsquo;t work out at all. After reading Charles Guan&rsquo;s <a href="http://www.etotheipiplusone.net/">blog</a> I&rsquo;ve decided to have another go.</p>

<h3>Powerbridge</h3>

<p>Of course a 12kg combat robot will need some motor controllers, so I resurrected some designs I&rsquo;ve been playing around and started to update them for the featherweight class of robots, it has the preliminary specs of 2x 20Amp 50Volt motor controller with easy firmware updates.</p>

<h3>Claymore MiniSumo</h3>

<p>Another combat robot I&rsquo;ve been designing is a small autonomous 500gram sumo bot, I like the idea of robots that control themselves, the start of Skynet as it were.</p>

<h2>That is it</h2>

<p>I&rsquo;m going to concentrate on these 4 projects until I complete as many of them as possible. My ideas for other projects like: a gokart, a home server, home automation, an updated <a href="http://www.ladyada.net/make/wavebubble/">Wave Bubble</a> are all going on hiatus.</p>
]]></content>
  </entry>
  
</feed>
