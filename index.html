
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Wires and Bits</title>
  <meta name="author" content="Pinski1">

  
  <meta name="description" content="It&rsquo;s been a long time since I last updated this blog. In that time the designs for Claymore have changed quite a bit. I&rsquo;ve settled on a &hellip;">
  
  <meta name="keywords" content="electronics,hobby,hack">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://wiresandbits.co.uk">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Wires and Bits" type="application/atom+xml">
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43965998-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/galleria/1.4.2/galleria.min.js" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/galleria/1.4.2/themes/classic/galleria.classic.min.js" type="text/javascript"></script>
<link href="//cdnjs.cloudflare.com/ajax/libs/galleria/1.4.2/themes/classic/galleria.classic.min.css" media="screen, projection" rel="stylesheet" type="text/css" />
<style>
  /* This rule is read by Galleria to define the gallery height: */
  #galleria{height:320px}
</style>

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Wires and Bits</a></h1>
  
    <h2>Robots and electronics.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:wiresandbits.co.uk" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/shop">Shop</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/03/claymores-chassis/">Claymore&#8217;s Chassis</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-02-03T18:09:00+00:00" pubdate data-updated="true">Feb 3<span>rd</span>, 2015</time>
        
         | <a href="/blog/2015/02/03/claymores-chassis/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It&rsquo;s been a long time since I last updated this blog. In that time the designs for Claymore have changed quite a bit. I&rsquo;ve settled on a sensor layout as well as discarding the whole idea of a lasercut chassis. The biggest driver in the decision to discard the laser cut chassis was me finally accepting that the Faulhaber motor gearboxes were unworkable in their current state. They were in a prime position to be the main mounting point but due to their thin all-plastic design there was no way to mount to them satisfactorily.</p>

<h2>Chassis</h2>

<p>Since becoming a member of <a href="http://www.makespace.org">Cambridge Makespace</a> one of the more amazing tools I&rsquo;ve had access to is the <a href="http://wiki.makespace.org/Equipment/WarcoMill">Metal Mill</a>. This tool cuts through aluminium and steel like a dream and is the main driver behind my decision to build the chassis out of milled aluminium. As the electronics is designed to fit inside the chassis this then requires a redesign of the electronics too.</p>

<h3>Motor Mounts</h3>

<p>The first thing I re-designed was the motor mounts, the dimension are largely copied from the plastic originals however I added more thickness to the base to allow me to drill and tap these for mounting. Unlike the laser cut chassis the motors mount to the base of the chassis rather than the top. This allows the electronics to drop in from the top and the battery to be held in with gravity.</p>

<p><img src="https://lh3.googleusercontent.com/c8pAhuXKJq9DdZwmBq-qLuj7XwlK3pwpjloHGZDiGLermzhkI8_erCZAs3ffWzb85yu5zzgQUOpoOUrA-qLsaFaEZJ1wd7sKnLouCcpQvCeKBjko8kQc-Gyn-9842AdVhjYJbeuAYYzIyFck1x2KrHxrbXXLynjLl2Vm77aDQz2jF3mQxLCVv94iNqnMEyWXVX1aEPeN_9Gf8k-rv8jJ4f6ol8wXgCC3bpvq7VcvVr0gjQwjgeKX4Z6nh8qdfAJhRfyCJzo836vOExeoZecP08xvv_xizDkrun6rr6AX7u8fXwmMNCmRNdW10_-aXZi1ZNAFyJFaO8ux-Z1LXGWlAxS0F29tOIlkZYfaUWvGnk2jtv0bcQzVeQTb_8y1uT4ahXF9ZeaKQkAK3fvXVmPpHHAnTpwkqfU5DLblefaxlSshonDoTwl_aNM1J8uLMYkiUeZV4jW6ZCk5q3f2waj4arQmWjnlfrQnanE_JBmxZUBrJJ89tFC2I2jeAqJpGCy6qldhj8u5iE97tdhJ8InM7E9QHXzJi_5_fXFW41nNK_8=w859-h775-no">
Rather than to screw directly into the aluminium which is quite soft and will strip after a few remove/replace cycles I used <a href="http://www.repairengineering.com/helicoil.html">Helicoils</a>. These spring-like stainless steel inserts screw into an over size tapped hole and have an internal thread which is the sized to fit your bolts, in my case M3. This allows me to remove/replace parts repeatedly with no loss of strength.</p>

<p><img src="https://lh3.googleusercontent.com/mxZ73AzRrfBPjLWVYDDbv5QXiFLXV7Ul2kVtMclEaItexVyVK2Rtp7XnBV68tq3jDX-d28E2dgP10ZHA62TjGGEfirg29Y2u5hL96BqksC9nY3lv_SGaGOu2usswZ-fpkESVWluz9vtsKbMpqHOqti-MFkBe56R5FCs4-BQnT1EvMVTUnpEI1E8xve6REHZ8LbIbxTs2Ul_10bC6kMrRYG3jGsG5tcIvZME9d04d7pQNi9vExoCWFVUpEjTUAZ-HZFYtVL_p_LUlIhuMXj49s-kwoLt4LfFwfWOtyoOKzNd8S2dh2qr7zFF-DCWThRPrH3EKlUgsjR0ByD90vKhih8eyaaAYqznnU2bOCBOBK2STh7IxAYggrGqQU3gmdZk_7GWvWEpgTOE5wQ9D2Pi_bmOVgiWM_FUF879YV1WPig8SfWNM5zoUnsj-hhwho4QLYYPRD98C__A3Ob1xAtD80kkH38LCCmVvMv76_sZkqBZoudQVvJSrvz8_JKoPFgvaOhaEClKY-6w-XQ9LLNgzMSpOjrHr5aqChrOAM1k5uZA=w647-h731-no"></p>

<h3>Base Plate</h3>

<p>The base of the chassis is made out of 1.6mm thick aluminium sheet that is cut and bent into an &ldquo;L&rdquo; shape. This reduces the need for an awkward mounting system in the rear of the chassis where the motors will mount and also stiffens the chassis a bit. To mount the sides to the chassis base I made up some small aluminium blocks that had 5 helicoiled threaded holes. These mount to the chassis with 2 bolts, to the sides with 2 bolts and attach to the PCB with 1 nylon standoff.</p>

<p><img src="https://lh3.googleusercontent.com/nbHAP4oXO_0pmydBpJG0NBb6aMRhANCBXabvg_MQ8-AwCWhbHe6Yg-SW52cIdrryj8dKYfTlgjuORFi5ZvLKduyVLhYXg99hg_f0PMlSN9eggfnzL2mXg70B5UCYmho-fE7VzgU4KzJTcJYPtXZrWROSyldP98FSnG_1bc0J8-3bB50jVhISgb3DeBNorR9s8X1cNUaGbZBfZq5wupdhmFjG3_G5skcKI6coKsu7F-dqJhOrp-N4dF3PxeI9G7zbZW0mWp6_nDGYCNjmt0Cd8LuBF7ktgXjQv9odcG0HVb3OEi5qZ3a0HfS-0nAJe6CYc15rJ3nxiBN-wkOLLhvYAOrOhZurfAFFXRi5ne_ao5_S6E6yxyk7F6N9yC3UCh82qDHoH7c2tqyLUy7Z4Xwyf7k_KZ67APq3Yr5hoLzf90k1a5v8zcAQ-hryspHPH9PFfkL_ujJ7sXFDZFra8nICJYQOFBNhcUf7-3_xLgXRxKEfurFxkxIuUPNfFgQ89m0cRFewrRX4vzMfAnZpjrLE6DbozMvpQt--7Tz5MBGuX9A=w990-h775-no"></p>

<h3>Chassis Front</h3>

<p>The front of the chassis is one large aluminium block to ensure that the front of the robot is kept down during high acceleration as well as to provide a ridgid mounting point for the sensors. Before I re-designed this block I bought some of the sensors I will use (Sharp GP2Y0D340K <a href="http://sharp-world.com/products/device/lineup/data/pdf/datasheet/gp2y0d340k_e.pdf">Datasheet</a>) and measured their range and detection pattern. I found that by spacing 3 sensors ~15&deg; apart I could cover a 90&deg; arc in front of the robot out to ~300mm.</p>

<p><img src="https://lh3.googleusercontent.com/riwuDrohYvcXKN-hFAQCrDgvT2oJrJ95MEBCLVF6_VE6pfbb8rlx7RFsXXthNNBTUv83z3G-KW4wr6xj7zD0UkZtgBWSHd4SC93g1tMX9rAyG2kWgcmpsmdERbf3Xy5xBy9PwVtTgVAxTMPgbF4tMsIa6bryXcYvd_qVgz6Qp18raa7HpRgbpMYJ30DwH2TfnPNcYETzczX_0LlCDyjRQOqsfOmGa1I6hI6uGQorwB03ua1INMle8ByaRdYwimAx4shCI0tyzVDktOVizG4WTtwnOS5wbjaZEbIQjXsYCsv6QX49vYPr1CF2JdE0-ggHtC0VK25Eg7KlVDCBq-YQIrqO1mksgk-mk8FMTwXoYS-wSh6yCY6qEN0chrf0u5N16r184aPLNKb65r0bFm_nGgUpuygmF_A9YciB2loZNClqmvxEOs3N5hZC74hcZuoDg43UxDBWyM_PeXzXLT6CeCxvq5MC1LEEBvKw53g9ZLpq-6zq76w7oFZfxGZFL2cFNo1UjCmm7n7CQyviggab2fTUEaiYRqdJoEXUGQDbUR4=w1518-h775-no"></p>

<h3>Skid and Sensors</h3>

<p>To keep the front of the robot from damaging the dohyo surface I machined a skid out of an engineering plastic called Delrin. This plastic is tough yet slippy so should be ideal for this. To detect the edge of the dohyo I added 2 edge sensors right on the front most edges of my robot. These should detect the transition from the black of the main dohyo surface to the white of the 25mm thick edge strip.</p>

<p><img src="https://lh3.googleusercontent.com/8xJHOW9gUL3XZORE1a-S5kZxE-7Ya5FQIsBY55SDplvnGU4Nv68cOKtKQalN8MHI-9AiU1Jqla4rIKMM5f6vtxpeI3MAYAQt5hnXJqnH5FpzP-XVEnDuXTp0QIEHS2A-AGUAh4aMMzenN1RO5h_XLgqiOYUZ9V6GhOngDhpqfN16E3dcsxuF4yehOkY9eHs0DD7gbse_9I_KYH8L513iMVlIT0wD-Zs-Am0cndbeLgUcc64HDfU6kKYi0u5mYGORQYABaivSOQUsBwxUfvJL6eQXOBogRiNJynY1AKrlxBUz2gOrkXEqaZRaGaT0Aks0c6wuieo872XkLN4_U4N8xtsyxQRIqaKuYYmPVIS3Uml3eP-YW-sL-0fyQWPQXg0163kCE9K5WlG1JwhOOcmlu13gWsbmOaEOezLJFp4c8G-G75oPVQFRI6WXbt53LP5IT_MGgqN4z6IFCeDOgyruINXdsp5oS6RZJ3NwfbCelUtvEXh0GprIVJfFVjlL2-Zr4aotg-giQve6frx43ukFURkHHf2-xisXQ_T6ZuZVP4c=w905-h775-no"></p>

<h3>Ascetics</h3>

<p>As plain aluminium is very shiny which will reflect infra-red light very well I will need to darken the exposed aluminium surfaces. Ideally I&rsquo;d anodize the aluminium however I don&rsquo;t think I&rsquo;ll get a great finish and it would be tricky to do myself. Instead I&rsquo;m planning to use a matt black vinyl wrap to cover the aluminium surfaces. This should be a simple process but should give a good finish.</p>

<p><img src="https://lh3.googleusercontent.com/we3OpT9YxRbRFrPtlJLm-GDH9svQFboi_7H94g9kyqYHXnohRrzJcFg76C35Oic5ZkKtcXIKzIrTVAWXp3sKxRZHUHjNtUDpJ-L3AyaACKlVD2HTpMjUmnAA6kNgjgeTH9fNJEqSWSvvBaCckh22cnW1LIjaEyuKQaVu4iYbkNzKDWx9agDO__XL1tGl_ghH2PCTYOUYdwErDtryvikvLJavPTZ9EpHVUtyPWoDCH2iMLDkYAaVKfDSkyZBuAfVJXeEB7X9_pBDjSGnvnbslpDz0PdjwIfEuzEZ3g1nme3AAnTitQ_sETHYExbTLmn8yRT1jDb8QF8XUJdyUGxZRkKaeK7ly9M7k68wE0MfK_ezUR9trD6gDMl2F97_RI2wlxkENWflKefF27mHIeTmZkBRgLN5m16R8zMsj9NA5BDOc31ib0mIGc_PJKMcziJI38FiT1ikDL5_9lsKEZ0PopEDFjYp861SE7DYs6pP7W4WNj3lVs7l-re3JruMnHMTiIUcCwKdrQDbJfrwc7iMSQixn02NHDKeT2fHGE-WyVI8=w1319-h775-no"></p>

<p>As the electronics will be mounted on top of the motors &amp; aluminium blocks I need a top cover to protect them. I&rsquo;ve decided that I will laser cut a 3mm translucent acrylic top with holes for buttons. This should looks good and provide enough protections from falls to the electronics.</p>

<p><img src="https://lh3.googleusercontent.com/dYGSnaswpgcf1U5CH-3ptO27Euulmi0rRaYMPJu21bjcYRmr7j-zxCveLl-6at2So3_NfIw7JB5v7IK82AxloS_T9W1wOBfa8uU3qtShIwq5ST-IIIPkXIkFBYvE5cYxewbFj0Sh3atmLkgI-zU8dLg81S4CEeciqlfVaFeB6Swqd-6BEW3sKaZafA-Pk8Dzj0ZjM419H3eGEY8-7buTluDoNw1DK4sBahUBVX_eNo46boTVtpGeCeKoavF_JAAprJaX2zTg-UPtbkXZSY9ah1rlhwv_UhaEOIo7Xge3RDHgFVuLI_kRPAlYrqCgqSbp-9xh8q2lwRMKlff-qi_D1wP1094_FRHCvOrQZXC3eD7_jpgYb2H1yHplTgotF2qi35Kcpo4WDjrx8mqhBnsJhX6cEGfrHk60X1O_7r9ZAsr3KR3MjNaRKr0S4pADB26eh0ZsXva9mnh89uhNNUA7VZvDqLczDp1wNa1P_bDnMOQEPwl-cXvsebCR9WIW5BfsiSnG-0qI_kzsJTO_rqcLjjxAiUkREewuuS2auiYvxC4=w1027-h775-no"></p>

<h2>Electronics</h2>

<p>The main change has been the PCB shape, in order to fit the battery the PCB is now a &ldquo;U&rdquo; shape with angled cut outs for the sensors. Unfortunately as this is a small PCB with lots of components and some very narrow places I&rsquo;m still trying to route tracks.</p>

<p><img src="https://lh3.googleusercontent.com/7LMcQres7WRcjQ8CMgLH8fArR8JMIkmzyOYs_VsSHftFbuleA0YhpCVE9hPrmbEl5ANVvvvI7utjY84rbn1CtljAbd55wjVFYxvNbPbWXlHBOA8J_kOV6Qn1-djhU1zzmFcJV7Lf2LXQDP9t9ShjJJxYdn--SktIFi_jVibxAP9XiFdtBVEXrSIbZ2Kr1TtjlYlmD2hkcxeo2fpoxilp5rB5_rMuaUsDsg7PaNTaW02PPkaaJktHvVq7_2Mgx0aVlxok96Frl5l74VhR6Yrre152lfx2q7OkK9h0BhMgA1-letXeuWKSFlYYx3uN6U27Q_FuGvaUYO24mVjbYWbFBGAd2ykekcsc7xlI1Q556XVEaNFBSffL2D5cKj-Rbqi7fv5m58hGgaPKuekrOxdMcHxVgj2TrB5eE50YE0CpKtKM__ByhozFuJO3XI2CpINCdW3L3WLgbfhGw0WR47o4KxW8JTqU3gR0zZPHn8VrlUdIGr8Uks66SNxgLiu8dBAcrHgTQzDN5H1dL42uiyvZvIAn7FaTp8e3RWSdhiOJwSw=w1209-h731-no"></p>

<!-- picture of paper cutout -->


<h3>Power handing</h3>

<p>One key aspect of the chassis redesign was the dimensions of the battery. The battery is a key component of the mini-sumo as without it nothing will run. I&rsquo;ve now decided to use Venom 10C 3 cell LiPoly batteries and have bought 2 to allow one to charge while one is being used. They&rsquo;re quite popular so there should be a ready supply of spares if required. They weigh 45grams and their dimensions are 68mm x 26mm x 18mm. It is important to note that a fully charged 3 cell LiPoly battery will have a pack voltage of 12.6V.</p>

<p><img src="https://lh3.googleusercontent.com/eqvBvWKCNpvLsv-TZxV9MMhstYHczOxtjD-vj_1wFzDmnxcni64dERu76yQ8iTJrbOIzr9_-Cgw_SXFhgcwFJWygNiLtrYivcunIx_P9TpJpwOkAOcUJi_1s_Jtjv9lPkFnEwM_DP_2IAu-aLIb7-NHmsR6SWiaY9k6gV8JCguuMcPb1KLsn4G-WV2DIwbZUjR5GTD0Jc2hA35e4dW4eLtTnnwXBk03f7_fAD4WwrSm3BfauJZRVCrFiFY_80uRNirucsAi2adZJeHF1d7isqmGcbhBgVdc8osWEkZl-poo6OxGXGtRd9lI55mPe6sPdgPiQWhr1UXe04Vk8MVmbSx0RaNcOln0anmcX26sENU7MH5a3t8oX04tDOOmk-UsAfBkLnVRwXqCdQH6-RKuBSXV2DYH5WQxVF4NFiLD-_4JPzdigoIKE9F2vu4rEeWvmkOdyE8dSQqouHWz1k0H4QDg2yyhrhsafkMcz9mKXdtHUIv9q1u3FL8X0KeuOo8t1FHq3twtlbCqHgHmbmkPDA9SGPCK0WQyuHKrkHlZQE6c=s500-no"></p>

<p>As the motors will be separated by the battery it will be hard to route a single motor controller chip like the <a href="http://toshiba.semicon-storage.com/info/lookup.jsp?pid=TB6612FNG&amp;lang=en">TB6612FNG</a> to both motors. Thus I have chosen to use  separate motor drivers, however I also need the motor driver chips to be compact as I do not have much space on the PCB. The motor chips I have chosen are Texas Instruments <a href="http://www.ti.com/product/drv8838">DRV8838</a> however these motor driver chips cannot handle power supplies of greater than 11Volts. To protect the DRV8838s I&rsquo;ve placed a large diode in series with the battery that has a Vfwd of 1.6Volts which should drop the voltage satisfactorily.</p>

<p>Another problem is that while the motors will be running at 11Volts, the GP2Y0D340K sensors require 5Volts to work, and the rest of the logic requires 3.3Volts to work. I decided to solve this by using a switch mode power supply to convert the battery Voltage down to a stable 5Volts for the range sensors and then I am using a linear regulator to convert from 5Volts down to 3.3Volts. This minimises the board space required while maintaining a high efficiency. This should cost too much nor generate too much heat.</p>

<h3>Sensors</h3>

<p>The GP2Y0D340K range sensors will plug into turned pin sockets mounted directly to PCB at the right 15&deg; angles. This allows me to change sensors if they get damaged but also provides a secure method of fastening them to the chassis via the PCB.</p>

<p>The <a href="https://www.sparkfun.com/products/9454">QRE1113</a> floor sensors will be mounted in Sparkfun breakout boards which bolt to the front block as seen in the picture above. They will have wire pigtails that connect to the PCB via tiny 3way JST <a href="http://www.jst-mfg.com/product/detail_e.php?series=231">SH</a> connectors. I&rsquo;ve still not quite decided where on the PCB these will mount but they don&rsquo;t take up much room at all.</p>

<h3>Interfacing</h3>

<p>As this is an autonomous combat robot I will need to change the code regularly to alter and improve tactics. The best way to do this is by including an ARM <a href="http://developer.mbed.org/">mbed</a> compatible chip that can be programmed via a built in USB bootloader. The NXP <a href="http://www.nxp.com/products/microcontrollers/cortex_m3/lpc1300/#overview">LPC1347</a> ARM Cortex-M3 microcontroller fits these requirements perfectly. To avoid cutting holes in the chassis the USB connector is placed pointing forwards between 2 of the range sensors. The buttons to reset and put the chip into bootloader mode will peek out through laser cut holes in the acrylic top cover.</p>

<!-- image of USB port -->


<p>To provide detailed status information I&rsquo;ve added a monochrome 128px x 32px I<sup>2</sup>C <a href="http://www.adafruit.com/products/931">OLED screen</a> to the PCB. This currently shows battery and build information on boot up and then motor and sensor status during the match.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/04/The-Unnamed-electronic-systems/">The Unnamed Electronic Systems</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-04T14:57:00+01:00" pubdate data-updated="true">Oct 4<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/10/04/The-Unnamed-electronic-systems/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While I&rsquo;m working on mechanical structure of The Unnamed I also need to consider how I will control the final robot. The <a href="http://www.fightingrobots.co.uk/content/23-rules-and-safety_1">rules</a> state that there need to be 2 elements before my robot is allowed to enter:</p>

<ul>
<li>Removable link</li>
<li>Powered indicator</li>
</ul>


<p>Of course the robot will need other items to operate such as:</p>

<ul>
<li>Battery</li>
<li>Motor Drivers</li>
<li>Radio Control Receiver</li>
</ul>


<h3>Removable Link</h3>

<p>The idea behind requiring a removable link is simple, it provides a guaranteed way of cutting of the power in case of emergency. It must be located in an accessible place and may only be covered by a clearly marked, and easily moved cover. In many robots the removable link also does double duty as the master power switch.</p>

<p>They are commonly made out of a high power collector that has the male plug pins shorted together and the female receptacle pins in line with the battery power leads. The female connector is used in line with the main power wiring to reduce the chances of a short circuit activating the robot unexpectedly.</p>

<h3>Powered Indicator</h3>

<p>The powered indicator must be a steady indicator that is lit when the robot is powered, it cannot be a filament bulb. This gives a clear indication if the robot is powered.</p>

<p>As it cannot be a filament bulb LEDs are often used. It will need to be connected into the removable link side of the robot so that it will only light if the link is in place and the robot is active.</p>

<h3>Motor Drivers</h3>

<p>I&rsquo;m planning to have 3 motors in my robot, 2 for drive and 1 for the weapon, in all 3 cases I will need to control the motors in both directions. As the motors I shall be using are powerful I will need motor drivers that can withstand high voltages and currents continuously as well as far higher peak currents. Of course despite these requirements they need to be compact but affordable as I don&rsquo;t want to spend all my money on awesome motor controller only to not have enough money for a weapon, or worse, no money for a chassis. One other important feature is reliability, often many robots lose a bout simply because their motor controller suffered a fault, burnt out or became disconnected, I do not want that to be the case for my robot.</p>

<p>For the moment I&rsquo;m planning to use modified TZ-85A brushless speed controllers.</p>

<h4>Movement</h4>

<p>I will be using two Gimson GR02 18 Volt 1:24 motors to drive two wheels each via a High Torque Drive (HTD) belt. The motors will pull approximately 8 Amps under load but will pull up to 62 Amps when stalled which means I will ideally want a motor controller that can take 10 Amps continuously and withstand short spikes of up to 65 Amps.</p>

<p>As I shall be using differential steering to control my robot I will need some way of mixing a remote control channel with left and right signals with a remote control channel with forward and backwards signals. This can be done either with a suitably intelligent dual channel motor controller or by using a V-Tail mixer to combine the signals.</p>

<h4>Weapon</h4>

<p>My current plans for a weapon call for an electrically powered actuator as part of a four-bar-lifter. I&rsquo;m expecting the actuator to be a <a href="http://www.gimsonrobotics.co.uk/GLA-S_linear_actuator.html">Gimson GLA-S</a> 100mm linear actuator. Gimson state that the expected stall current is 62 Amps and the expected load current is 23 Amps, this means ideally I want a motor controller than can survive 62 Amps peak but I&rsquo;ll definitely want to be able to manage 30 Amps continuously. This actuator should reach full extension (205mm to 305mm) in approximately 5 seconds under load which could be too slow however this will require further work before I am certain.</p>

<p>Linear actuators do not spin continuously and will reach a limit where they cannot travel any further without damaging the motor or the actuator, to signal when the actuator has hit these points limit switches are installed. While limit switches are built into the SLA-S actuator they are not connected to the motor directly as they would not be able to handle the current, this requires me to add a circuit to detect inputs from these switches and control the motor accordingly.</p>

<h3>Battery</h3>

<p>To power the motors in the robot a battery is needed, its characteristics such as voltage and capacity are defined by what I need it to power. The Unnamed has:</p>

<table>
<thead>
<tr>
<th></th>
<th>Qty&emsp;</th>
<th>Description&emsp;</th>
<th>Load Current (Amps)&nbsp;</th>
<th>Sub-Total (Amps)&nbsp;</th>
<th>Stall Current (Amps)&nbsp;</th>
<th>Sub-Total (Amps)&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>2</td>
<td>Gimson GR02</td>
<td>8</td>
<td>16</td>
<td>62</td>
<td>124</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Gimson GLA-S</td>
<td>23</td>
<td>23</td>
<td>62</td>
<td>62</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Misc Electronics&emsp;</td>
<td>0.2</td>
<td>0.2</td>
<td>0.2</td>
<td>0.2</td>
</tr>
<tr>
<td></td>
<td>Totals:</td>
<td></td>
<td></td>
<td>39.2</td>
<td></td>
<td>186.2</td>
</tr>
</tbody>
</table>


<br />


<p>Assuming a bout lasts 10 minutes then I will need a battery capacity of 6.6 Amp hours (Ah) if all the motors are constantly operating, the absolute worst case suggests I&rsquo;d need a 31 Ah battery if the motors were continuously stalled. Neither of these estimates are particularly realistic as I will not be driving at top speed for all of a bout, and nor will the lifter be constantly extending and retracting.</p>

<p>The 6.6 Ah figures is closer to being realistic so I will aim to have a battery that is close to this. Another consideration is the voltage of the battery, the GR02s and the GLA-S are both rated at 18 Volts however I&rsquo;m planning to overvolt them by using a 5 cell Li-Poly battery at 18.5 Volt nominal.</p>

<h3>Radio Control Receiver</h3>

<p>To control the robot I am planning to use a DSM2 compatible transmitter and receiver set, DSM2 is a 2.4GHz standard that allows different receivers and transmitter from different manufacturers to work together. My robot will require a minimum of 3 channels, one for each drive motor and one for the weapon. I could use a further 4th channel to enable inverted control for when my robot is flipped over or to enable other functions remotely.</p>

<h2>My Solution</h2>

<p>With these considerations in mind I came up with the following circuit:</p>

<p><img src="https://lh3.googleusercontent.com/-AO9cxGub2X8/UnT7i4gSR2I/AAAAAAAACt8/3wYcZNjn4qU/w1358-h681-no/The+Unnamed.png"></p>

<p>I&rsquo;ve chosen a 5 cell 4.7AmpHour 30C Lithium Polymer battery from <a href="http://www.optipower.co.uk/">OptiPower</a>, this should provide enough power for long enough to last a bout. It will be capable of sourcing 141Amps (30C &times; 4.7AHr) continuously with peaks of 376Amps (80C &times; 4.7AHr).</p>

<p>To protect the motor drivers and RC electronics I&rsquo;ve put a 100Amp automotive <a href="http://en.wikipedia.org/wiki/Fuse_%28automotive%29">Maxi Fuse</a>. As it is a cartridge fuse it&rsquo;s easy to replace if it gets blown but is also robust enough to act as a removable link. By choosing an automotive fuse cartridge it should be easy to buy spares and even replacement fuses with smaller ratings.</p>

<p>I&rsquo;m going to use a high power red LED to indicate that the robot is powered, this will be connected after the fuse such that if the fuse blows the LED will not light.</p>

<p>The terminal block is ideal for the central connection node of my electronics system. The screw clamps will allow me to easily make and remove connections whilst securely grabbing any cable and holding it tight. It should also allow me to keep the wiring neat and tidy which will help me in maintaining the robot.</p>

<p><img src="https://lh4.googleusercontent.com/-bXl4wB7CVoE/VMkv8_GFWbI/AAAAAAAAC3g/hCPnhk3cbhM/w1278-h474-no/xt%2Bconnectors.jpg"></p>

<p>I&rsquo;ve omitted the connectors from this diagram to keep it simple, however I&rsquo;m planning to use XT60 connectors like the ones above left to join the motors to the speed controllers. The battery will connect to the wire link with an XT90 connector, show above right, which is a the bigger brother of the XT60. By connectorising these key parts of the system it enables me to quickly re-configure the robot for maintenance or debugging. They&rsquo;re polarised so I cannot plug things in backwards as well as gendered so I can ensure that the parts of the system that supply power have female plugs to reduce the chances of shorts.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/25/rules-of-thumb-for-designing-4-bar-lifters/">Rules of Thumb for Designing 4-bar Lifters</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-25T21:19:00+01:00" pubdate data-updated="true">Sep 25<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/09/25/rules-of-thumb-for-designing-4-bar-lifters/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The main weapon for The Unnamed is a 4-bar lifter. It takes its name from the <a href="http://en.wikipedia.org/wiki/Four-bar_linkage">Four-bar Linkage</a> used to move the lifting arm</p>

<p>One of the most famous 4-bar lifter robots is the American Biohazard, it coupled a very low robot with the ability to lift the opponent very high. Below is a video of it defeating Greenspan in May 2002.</p>

<iframe width="600" height="450" src="https://www.youtube.com/embed/zf3wN87oY0o" frameborder="0" allowfullscreen></iframe>


<p>As I&rsquo;m trying to emulate the weapon of Biohazard for The Unnamed I need design my own 4-bar lifter.</p>

<h2>Design</h2>

<p>While it is called a 4-bar linkage one of the bars is actually the robots chassis so this is fixed from a design point of view. The other 3 bars however are very much up to the designer, and because of this the number of variables it is very hard to work out the &ldquo;best&rdquo; design.</p>

<p>I began my design with a number of aims:</p>

<ul>
<li>It needs to fit into an area roughly 300mm by 50mm to stay inside the robot</li>
<li>It needs to be reasonably fast, ~2 seconds to complete a lift</li>
</ul>


<p><img src="https://lh4.googleusercontent.com/-DdzypPtyBzQ/VMlC9p-gbHI/AAAAAAAAC4A/nAhbY0O4txU/w860-h685-no/Four%2BBar%2B-%2Bstarting%2Bscreen.png"></p>

<p>To do this I used SketchUp to position the bars which allowed me to easily get the lengths and angles. These lengths and angles where then inputted into &ldquo;Four Bar&rdquo;, a 4-bar lifter calculated written by Adam Wrigley and available from <a href="http://www.totalinsanity.net/tut/mechanical/4barfrontbar.php">here</a>.</p>

<p><em>Note: This software is old and will need an older version of dotNet in order to install.</em></p>

<h3>Rules of Thumb</h3>

<p>After playing around with it a lot I&rsquo;ve decided on these rules of thumb, I&rsquo;m not a mechanical engineer so there is no theoretical justification, just what&rsquo;s happened when I&rsquo;ve altered it.</p>

<ul>
<li>The rear bar controls how far forwards or backwards the lifter throws

<ul>
<li>if it&rsquo;s at a 45&deg; angle then you will have a vertical lift with little forward or backwards throw</li>
<li>if it&rsquo;s less than a 45&deg; angle then the lifter blade will move forward during the lift</li>
<li>if it&rsquo;s more than a 45&deg; angle then the lifter blade will move backwards during the lift</li>
</ul>
</li>
<li>The forward bar controls the height the lifter reaches at the end of a throw

<ul>
<li>the longer the forward bar is, the higher the lifter will be able to reach</li>
<li>the shorter the forward bar is, the less height the lifter will be able to reach</li>
</ul>
</li>
</ul>


<p>After spending quite some time playing around with the lengths and angles I finally came up with a design that produced a result I was happy with.</p>

<p><img src="https://lh3.googleusercontent.com/-ZY3PFmmdkEE/VMlC9UKsb_I/AAAAAAAAC38/ieWMySVafTc/w853-h685-no/Four%2BBar%2B-%2Bfinal%2Bresult.png"></p>

<p><em>Note: The calculator uses the units that you enter, in my case millimetres and kilograms.</em></p>

<p>The drawing on the left shows the lowered position in red and the raised position in blue. The tip of the lifter is traced through the entire range with the pink line. As you can see the lifter raises 22.5 centimetres and also moves forwards by 5.0 centimetres, this the advantage of using a 4-bar linkage compared to a simpler flipper.</p>

<p>The graph on the right shows that the front arm is originally 12&deg; from horizontal and rotates until it is 58&deg; from the horizontal. The height increases linearly with rotation which should help the control of the lifter. The torque curve is constant around 39 Newton Meters for the majority of the lifter&rsquo;s movement however for the last 7 centimetres the torque rises very sharply to 129 Newton Meters. The torque figures are calculated assuming a 15 kilogramme weight (opponent) on the tip of the lifter however increases to this mass (multiple opponents, the arena wall) will cause the torque requirements to increase.</p>

<h2>Powering the Lifter</h2>

<p>Of course just having a mechanical design for the lifter bars is great, most of the work in fact, however I still need a way to power the lifter. Using the calculator above I need to provide more than 150 Newton metres of torque to the front arm of the lifter. Looking back to Biohazard it uses 2 electronic linear actuators to push against the front arms.</p>

<h3>Pneumatics</h3>

<p>One of the main advantages of lifters is that they are very similar to a flipper but without the high impulse power that can be provided by pneumatics. It would be possible to drive the 4-bar lifter with a pneumatic ram however I don&rsquo;t feel like I have enough knowledge and understanding of pneumatic systems to do this safely and will save this for a future robot.</p>

<h3>Motors</h3>

<p>An alternative to linear actuators is to have a very high torque motor to drive one of the linkages directly. This was the approach taken by Charles Guan with his <a href="http://www.etotheipiplusone.net/?cat=30">Test Bot 4.5 MCE</a>. This would be more difficult for me to impliment as I do not have lots of space and I need to source or design a suitable gear box. I will probably avoid this approach.</p>

<h3>Linear Actuators</h3>

<p>These are a popular method of driving lifters, although they&rsquo;re much rarer in HeavyWeight robots, Biohazard was an exception rather than a rule. A recent featherweight combat robot that made use of a lifter powered by linear actuators was <a href="http://www.fightingrobots.co.uk/threads/11330-team-pasty-build-diary-loki/">Loki</a> who did quite well for themselves in the 2014 Featherweight Championships.</p>

<p>Looking on <a href="http://www.gimsonrobotics.co.uk/">Gimson Robotics</a> they have the <a href="http://www.gimsonrobotics.co.uk/GLA-S_linear_actuator.html">GLA750-S</a> which seems like exactly what I need. It is capable of 2300 Newtons of force, 50 millimetres of throw, and a top speed of 37 millimetres per second. However I will need more than just a motor controller to drive this as I need it to stop at the lower and upper end points else it will lock itself together.</p>

<h2>Control</h2>

<p>The GLA750-S uses the same motor (RS 550) as the GR02 gear motors, therefore it makes a bit of sense to use the same motor controller, the TZ-85A. However I need to add some way of stopping the linear actuator when it has reached the minimum and maximum lengths. Typically actuator have end stop switches built in which are connected as shown below in the image from Gimson Robotics:</p>

<p><img src="https://lh5.googleusercontent.com/-tc0a_J3iFf8/VMlggr23neI/AAAAAAAAC5E/gdtb71Crl4Y/w589-h258-no/gla_limit-switch-circuit.jpg"></p>

<p>However for the GLA750-S the motor current is too high and will cause the switches to fail, even under no load conditions. This means I&rsquo;d have to construct my own limit switches, most likely due to the currents the limit switches would then operate relays or MOSFETs to limit the motor.</p>

<p>Another option is to further modify the TZ-85A but not re-programming with the stock brushed DC motor control firmware. Instead further modifying the firmware to accept an analogue input and connecting a variable resistor or potentiometer to it. The potentiometer would vary in relation to the position of the linear actuator and would be in effect be a super sized servo. The advantage of this is that the RC pulses no longer specify a speed but a position which the linear actuator will always try and match. This way should external forces move the actuator out of position, it would apply more power (if available) until it matched the requested position again. This would require understanding the current modified firmware as well as extensive testing. Any mistakes could cause the linear actuator to irreparably damage itself.</p>

<p>That would be bad.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/22/mini-sumo-claymore/">Mini-Sumo Claymore</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-22T14:39:00+01:00" pubdate data-updated="true">Sep 22<span>nd</span>, 2013</time>
        
         | <a href="/blog/2013/09/22/mini-sumo-claymore/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Whilst visiting the Birmingham <a href="https://www.bcu.ac.uk/tee/events/techfest">TechFest</a> in 2011 with a few classmates from university I saw people with small autonomous robots, the robots were attempting to push each other out of a black circle. It turned out that this was a mini-sumo competition. The robots had to be autonomous, weight less than 500 grams and must fit in a 100mm cube. This sounded like an interesting challenge so I have tried to make my own.</p>

<!-- youtube a video of a competition -->


<h3>Rules</h3>

<p>The official rules are listed <a href="http://www.tic.ac.uk/micromouse/RULES/MiniSumoRules.pdf">here in PDF</a> however the important points are:</p>

<ul>
<li>Matches take place in a Dohyo

<ul>
<li>This is a circular arena with a diameter of 77 centimetres painted black</li>
<li>It has a white line on the border 2.5 centimetres wide</li>
<li>There is nothing else surrounding the Dohyo for at least 50 centimetres</li>
</ul>
</li>
<li>The robot must:

<ul>
<li>Fit in a box 10 centimetres wide and 10 centimetres deep, there is no height restriction</li>
<li>It must not weight more than 500 grams</li>
<li>Autonomous robots must begin a match 5 seconds after a button is pressed</li>
<li>No jammers or damaging weapons allowed

<ul>
<li>But a flipper is not ruled out&hellip;</li>
</ul>
</li>
</ul>
</li>
</ul>


<h2>Objectives</h2>

<p>Like The Unnamed I&rsquo;ve set down some initial starting goals:</p>

<ul>
<li>It must weight 500 grams</li>
<li>Fit inside the 100 mm cube</li>
<li>Try and be less than 30mm high</li>
<li>I want to focus on intelligence rather than brute force

<ul>
<li>But it helps to have brute force too</li>
</ul>
</li>
<li>Use 2 opponent sensors and 2 edge sensors</li>
<li>Use &lsquo;modern&rsquo; construction methods

<ul>
<li>This includes 3D printers and laser cutters</li>
</ul>
</li>
</ul>


<h2>Parts</h2>

<p>I started by collecting some parts for the robot. Normally I try and fully design a robot before ordering parts, this stops me from wasting money on things that won&rsquo;t fit with the final design, however more often than now I find myself never quite finishing it. This time I decided that as the robot will be rather small I may as well buy parts that look like they&rsquo;ll fit and then design a chassis around them.</p>

<h3>Drive System</h3>

<p>I figured the first step would be to organise a decent drive system after all the point of this robot is to push other robots out of the ring, it needs to be a solid system as it is my only offensive weapon. I started by trying to find motors from Faulhaber or Maxxon, both very high quality, very high cost precision motors. Googling for Faulhaber lead me to a <a href="http://www.robotroom.com/FaulhaberGearmotor.html">Robot Room</a> post which then lead me to a surplus website selling them <a href="http://www.voti.nl/shop/catalog.html?MOT-20-2">here</a>. A couple of important things to note about these motors which made them ideal; they have pre-built right angle gearboxes already attached, they have encoders mounted on the rear to count rotations and while they&rsquo;re rated for 6 Volts they seem capable of handling ~12 Volts.</p>

<p>I&rsquo;m planning to run the motors in a closed loop control system, this means that rather than setting a PWM value as is the standard I will instead set a counts per interval then the code will attempt to match that value by varying the speed of the motor. This means that should something slow me down, either battery levels draining or an opponent in front of me the controller will increase the PWM value until the counts per interval matches. The only downside to this method is that it is more complex and requires a decently powerful microcontroller, however I was planning to add one anyway so this is acceptable.</p>

<p>The motors at 6 Volts only rotate 80 times a minute or 1.3 times a second which is not very quick at all, if I instead run these motors at 12 Volts then I should get 170 Rotations per Minute (RPM) or 2.8 times a second. This is much better and coupled with the right wheels will make for a fast robot. To provide this 12 Volts I need a powerful but compact battery, I&rsquo;m not too concerned about weight, but the smaller I can make my robot the harder it will be to sense. With that in mind I&rsquo;ve chosen a Lithium Polymer (LiPoly) battery made up of 3 cells for a battery voltage of +11.1 Volts and a capacity of 800 milliamp hours, it measures 75mm x 23mm x 15mm and weights under 63 grams.</p>

<p>The final component of the drive system are the wheels. I want a robot that is around 30mm high so cannot choose wheels larger than that, they also need to maintain good grip on the floor to help push other robots around. I ended up buying a pair of Solarbotics <a href="http://www.technobotsonline.com/solarbotics-rw2-aluminium-wheel-for-3mm-axle.html">RW2 wheels</a>. These have a diameter of 31.2mm which translates to a top speed of 277 mm per second which would be fast enough for this purpose.</p>

<h3>Sensors</h3>

<p>The robot will require 2 types of sensors, one set to detect opponents and manoeuvre them off the edge of the Dohyo and another set to detect the edge of the Dohyo and avoid it.</p>

<p>The distance sensors should have a long range, but to avoid detecting things outside the Dohyo the maximum range must be limited to 50 centimetres + 2.5 centimetres = 52.5 centimetres but should be more than 77 centimetres  &ndash; 10 centimetres &ndash; 10 centimetres = 57 centimetres to ensure that the opponent can be sensed at all ranges. The minimum range should be as close to 0 centimetres as possible to avoid missing the opponent when it is directly in front. The (IR) distance sensors from Sharp are very popular as they fit nicely into this range bracket. I&rsquo;ve chosen the <a href="http://sharp-world.com/products/device/lineup/data/pdf/datasheet/gp2y0d340k_e.pdf">GP2Y0D340K</a> as it has a minimum range of 1.5 centimetres and a maximum range of 40-42.5 centimetres. The maximum range should be acceptable as the robot will be moving around as it scans for the opponent which will reduce the chances of the worst case scenario happening.</p>

<p>The edge detection sensors don&rsquo;t need quite so much range but they need to detect the change from the black Dohyo floor to the white edge border cleanly. The edge sensors I choose will need to sense the change quickly, if the robot is travelling at its top speed of 277 millimetres per second then the robot has 1.1 seconds to come to a halt to avoid driving off the edge. The popular sensors for this task are the <a href="http://www.vishay.com/docs/83752/tcrt1000.pdf">TCRT1000</a> from Vishay. The TCRT1000 combines an Infra-Red (IR) transmitter receiver pair in a single package, correctly biased they be set up to give a digital output that ranges when the border is detected, this can then set off an interrupt to stop the robot.</p>

<h3>Logic</h3>

<p>To control the robot I will need some logic to receive inputs, process them and then act upon them, as I want the strength of my robot to be the processor this is where I need to choose a fast and powerful microcontroller. I will use the faster microcontroller to get inside my opponents Observe, Orientate, Decide, Act loop (<a href="http://en.wikipedia.org/wiki/OODA_loop">OODA</a>), this is done by cycling through the loop faster than the opponent, causing the opponent to act upon a situation that has already changed.</p>

<p>For fast powerful microcontrollers that are still compact the ARM architecture is the most prevalent and of these I have the most experience with the <a href="http://www.nxp.com/products/microcontrollers/cortex_m3/LPC1343FBD48.html">LPC1343</a>. This will be a good choice as it has enough input/output pins for the robot and runs at 72 Megahertz which will allow it to react quickly to changes in its environment. Unfortunately it does not have any non-volatile memory so I may have to include an external EEPROM chip to provide the memory that will exist between power cycles.</p>

<p>The motors will require a specialised chip to drive them as the microcontroller outputs will not be sufficient. This chip will need to work with a +11.1 Volt supply from the battery for the motors and accept control signals  that are +3.3 Volts. The motors will pull approximately 0.4 Amps when stalled so the chip ideally needs to be able to handle approximately 1 Amp of current to be safe. There are a few available chips such as the <a href="http://www.toshiba-components.com/docs/linear/TB6612FNG_en_datasheet.pdf">TB6612FNG</a> or the <a href="www.allegromicro.com/~/Media/Files/Datasheets/A4950-Datasheet.ashx">A4950</a> I will choose a suitable one as the space constraints are discovered.</p>

<p>The LPC1343 requires a +3.3 Volt power supply, the sensors require a +5 Volt power supply, I have a +11.1 Volts battery on my robot, this means I will need to include 2 stages of regulation, one to +5V and another to +3V3. The best way to drop the +11.1 Volts down to +5 Volts is to use a Switch Mode Power Supply (SMPS), these are typically very efficient and generate very little heat. I will then use a linear regulator to drop from +5 Volts down to +3.3 Volts this will give me a very stable, noise free supply for the sensitive microcontroller.</p>

<h3>Chassis</h3>

<p>These disparate parts require a chassis to act as glue holding them together. As none of the robots opponents will be able to cause physical damage there is no need to armour my robot however the chassis will need to be stiff enough to withstand pushing and being pushed by other robots. By making at low as possible I reduce the cross sectional area that an opponent can detect, depending on my opponents sensors I can also construct my robot to further reduce my chances of being detected. For robots that use sonar sensors I can either deflect the ultrasound or absorb it to reduce the returned ultrasound levels, for IR sensors I can do the same but with different materials. I however will not construct my robot to take advantage of this in the first mini-sumo, however for my next robot I may look into &ldquo;stealth&rdquo; techniques.</p>

<p>The minimum height I can build my robot is set by my wheels, 31.2mm, the minimum width of my robot is set by the width of 2 wheels, 2 motors and the battery, 87mm, the minimum length of my robot is set by the length of the motors, 72mm. The total weight of those 5 components is ~200 grams. This means I have approximately 300 grams to fit the logic circuitry, sensors and chassis in. To accurately plan how I would do this I used SketchUp as a Computer Aided Design (CAD) program, it&rsquo;s not as functional as Solidworks or AutoCAD but it is far easier to use.</p>

<p>After many design ideas and tweaks I came up with an idea:
<img src="https://lh6.googleusercontent.com/-TnAG8U0xAqc/Uj9I1sREXNI/AAAAAAAACro/a-_sV7KKI7o/w866-h755-no/Claymore_front_iso_v4.1.png"></p>

<p>It was to be built out of laser cut 6mm plastic, ideally Delrin, Acetal, or Polycarbonate (preferably not acrylic) using Pettis joints to hold it together with hex cap screw and square nuts. These joins have proven them selves to be very rigid and very easy to cut out with a laser cutter.</p>

<p><img src="https://lh3.googleusercontent.com/HVLwRU5L3vmTO_1dLBvSWOXqMmJwF2gdlz_CROpXohg=w663-h498-no"></p>

<p>The motors, not having any mounting attachments, would be zip-tied in custom 3D printed motor clips which had nut traps so they could be bolted onto the top plate of the chassis. This would form a monocoque structure which would be easy to fabricate, construct and dismantle for repairs/upgrades.</p>

<p><img src="https://lh4.googleusercontent.com/-vRsUFuJQyCU/Uj9I1n4VsiI/AAAAAAAACrg/CcDRTmb8KPA/w994-h835-no/Claymore_rear_iso_v4.1.png"></p>

<p>To aid in the pushing of opponents a metal plate was added, this had a lip on the front that would protrude out and down. The idea being that as an opponent was found, engaged and pushed the lip would get underneath the opponent and raise their wheels reducing the contact with the ground degrading the grip.</p>

<h2>Testing</h2>

<p>Once version 1 of the chassis was laser cut and the parts installed the first problem was noted, the chassis was in fact cut out of 5mm acrylic, the design was for 6mm plastic. This difference was enough to completely ruin the strength of the structure however it was acceptable enough for testing. Another initial problem was that I was already using my LPC1343 <a href="http://www.universalair.co.uk/control/forebrain">development board</a> in another project and could not remove it however I had recently bought a <a href="http://www.pjrc.com/store/teensy3.html">Teensy 3</a> from the <a href="http://www.kickstarter.com/">Kickstarter</a>. To control the motors I use a TB6612FNG <a href="https://www.sparkfun.com/products/9457">breakout board</a> I had available.</p>

<p><img src="https://lh5.googleusercontent.com/-kgKjf0jEcWQ/Uj78qt4TjJI/AAAAAAAACq4/GfYSNinDPf8/w1358-h766-no/2013-08-09+07.45.00.jpg"></p>

<p>I connected everything up, wrote a quick program to control the motors and loaded it onto the Teensy 3. The first problem was the amount of noise that came from the motors, I thought something had gone horribly wrong, they shouldn&rsquo;t be that loud! Looking at the information on the Teensy 3&rsquo;s PWM it turns out the default frequency is 488.28 Hertz, this is far too slow and is well with in the human audible range. I changed the frequency to 18 kilohertz this is at the very top end of the audible frequency range and reduced the noise completely.
I&rsquo;ve started to implement the code to read the number of counts per interval however I&rsquo;ve yet to verify the numbers nor do anything useful with them.</p>

<figure class='code'><figcaption><span>Claymore test code for Teensy 3</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="cm">/* Pin Map */</span>
</span><span class='line'><span class="cp">#define MOTOR_L_IN_1    16</span>
</span><span class='line'><span class="cp">#define MOTOR_L_IN_2    15</span>
</span><span class='line'><span class="cp">#define MOTOR_L_PWM     22 </span>
</span><span class='line'><span class="cp">#define MOTOR_STBY      14</span>
</span><span class='line'><span class="cp">#define MOTOR_R_IN_1    17</span>
</span><span class='line'><span class="cp">#define MOTOR_R_IN_2    18</span>
</span><span class='line'><span class="cp">#define MOTOR_R_PWM     23  </span>
</span><span class='line'><span class="cp">#define MOTOR_L_A       11</span>
</span><span class='line'><span class="cp">#define MOTOR_L_B       12</span>
</span><span class='line'><span class="cp">#define MOTOR_R_A       2</span>
</span><span class='line'><span class="cp">#define MOTOR_R_B       3</span>
</span><span class='line'><span class="cp">#define LED_STATUS      13</span>
</span><span class='line'><span class="cp">#define SENSOR_OPP_L    0</span>
</span><span class='line'><span class="cp">#define SENSOR_OPP_R    0</span>
</span><span class='line'><span class="cp">#define SENSOR_FLR_L    0</span>
</span><span class='line'><span class="cp">#define SENSOR_FLR_R    0</span>
</span><span class='line'><span class="cp">#define RUN             0</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Global Variables */</span>
</span><span class='line'><span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">leftCounter</span> <span class="o">=</span> <span class="mh">0x00000000UL</span><span class="p">;</span>
</span><span class='line'><span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rightCounter</span> <span class="o">=</span> <span class="mh">0x00000000UL</span><span class="p">;</span>
</span><span class='line'><span class="k">volatile</span> <span class="kt">char</span> <span class="n">oldLeft</span><span class="p">,</span> <span class="n">oldRight</span><span class="p">,</span> <span class="n">newLeft</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">newRight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="k">static</span> <span class="kt">char</span> <span class="n">encoderQuadrature</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Global Functions */</span>
</span><span class='line'><span class="kt">void</span> <span class="n">leftMotorA</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">oldLeft</span> <span class="o">=</span> <span class="n">newLeft</span><span class="p">;</span>
</span><span class='line'>  <span class="n">newLeft</span> <span class="o">=</span> <span class="p">(</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">MOTOR_L_A</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">MOTOR_L_B</span><span class="p">);</span>
</span><span class='line'>  <span class="n">leftCounter</span> <span class="o">+=</span> <span class="n">encoderQuadrature</span><span class="p">[(</span><span class="n">oldLeft</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">newLeft</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">leftMotorB</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">oldLeft</span> <span class="o">=</span> <span class="n">newLeft</span><span class="p">;</span>
</span><span class='line'>  <span class="n">newLeft</span> <span class="o">=</span> <span class="p">(</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">MOTOR_L_A</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">MOTOR_L_B</span><span class="p">);</span>
</span><span class='line'>  <span class="n">leftCounter</span> <span class="o">+=</span> <span class="n">encoderQuadrature</span><span class="p">[(</span><span class="n">oldLeft</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">newLeft</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">rightMotorA</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">oldRight</span> <span class="o">=</span> <span class="n">newRight</span><span class="p">;</span>
</span><span class='line'>  <span class="n">newRight</span> <span class="o">=</span> <span class="p">(</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">MOTOR_R_A</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">MOTOR_R_B</span><span class="p">);</span>
</span><span class='line'>  <span class="n">rightCounter</span> <span class="o">+=</span> <span class="n">encoderQuadrature</span><span class="p">[(</span><span class="n">oldRight</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">newRight</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="kt">void</span> <span class="n">rightMotorB</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">oldRight</span> <span class="o">=</span> <span class="n">newRight</span><span class="p">;</span>
</span><span class='line'>  <span class="n">newRight</span> <span class="o">=</span> <span class="p">(</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">MOTOR_R_A</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">MOTOR_R_B</span><span class="p">);</span>
</span><span class='line'>  <span class="n">rightCounter</span> <span class="o">+=</span> <span class="n">encoderQuadrature</span><span class="p">[(</span><span class="n">oldRight</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">newRight</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">getMotorSpeed</span><span class="p">(</span><span class="kt">int</span> <span class="o">&amp;</span><span class="n">leftSpeed</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">rightSpeed</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">elapsed</span> <span class="o">=</span> <span class="mh">0x00000000UL</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">localLeftCounter</span> <span class="o">=</span> <span class="n">leftCounter</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">localRightCounter</span> <span class="o">=</span> <span class="n">rightCounter</span><span class="p">;</span>
</span><span class='line'>  <span class="n">leftCounter</span> <span class="o">=</span> <span class="mh">0x00UL</span><span class="p">;</span>
</span><span class='line'>  <span class="n">rightCounter</span> <span class="o">=</span> <span class="mh">0x00UL</span><span class="p">;</span>
</span><span class='line'>  <span class="n">elapsed</span> <span class="o">=</span> <span class="n">micros</span><span class="p">()</span> <span class="o">-</span> <span class="n">elapsed</span><span class="p">;</span>
</span><span class='line'>  <span class="n">leftSpeed</span> <span class="o">=</span> <span class="p">(</span><span class="n">localLeftCounter</span> <span class="o">*</span> <span class="mi">60000000</span><span class="p">)</span><span class="o">/</span><span class="n">elapsed</span><span class="p">;</span>
</span><span class='line'>  <span class="n">rightSpeed</span> <span class="o">=</span> <span class="p">(</span><span class="n">localRightCounter</span> <span class="o">*</span> <span class="mi">60000000</span><span class="p">)</span><span class="o">/</span><span class="n">elapsed</span><span class="p">;</span>
</span><span class='line'>  <span class="k">return</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">setMotorSpeed</span><span class="p">(</span><span class="kt">int</span> <span class="n">leftSpeed</span><span class="p">,</span> <span class="kt">int</span> <span class="n">rightSpeed</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="n">leftSpeed</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_L_IN_1</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_L_IN_2</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">leftSpeed</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_L_IN_1</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_L_IN_2</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_L_IN_1</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_L_IN_2</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="n">analogWrite</span><span class="p">(</span><span class="n">MOTOR_L_PWM</span><span class="p">,</span> <span class="n">leftSpeed</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="n">rightSpeed</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_R_IN_1</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_R_IN_2</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">rightSpeed</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_R_IN_1</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_R_IN_2</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_R_IN_1</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_R_IN_2</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="n">analogWrite</span><span class="p">(</span><span class="n">MOTOR_R_PWM</span><span class="p">,</span> <span class="n">rightSpeed</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">setup</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_L_IN_1</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_L_IN_2</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_L_PWM</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_R_IN_1</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_R_IN_2</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_L_PWM</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_STBY</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_STATUS</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_L_A</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_L_B</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_R_A</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">MOTOR_R_B</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">SENSOR_OPP_L</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">SENSOR_OPP_R</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">SENSOR_FLR_L</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">SENSOR_FLR_R</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
</span><span class='line'>  <span class="n">pinMode</span><span class="p">(</span><span class="n">RUN</span><span class="p">,</span> <span class="n">INPUT_PULLUP</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_L_IN_1</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_L_IN_2</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_L_PWM</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_R_IN_1</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_R_IN_2</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_R_PWM</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_STBY</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_STATUS</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">attachInterrupt</span><span class="p">(</span><span class="n">MOTOR_L_A</span><span class="p">,</span> <span class="n">leftMotorA</span><span class="p">,</span> <span class="n">CHANGE</span><span class="p">);</span>
</span><span class='line'>  <span class="n">attachInterrupt</span><span class="p">(</span><span class="n">MOTOR_L_B</span><span class="p">,</span> <span class="n">leftMotorB</span><span class="p">,</span> <span class="n">CHANGE</span><span class="p">);</span>
</span><span class='line'>  <span class="n">attachInterrupt</span><span class="p">(</span><span class="n">MOTOR_R_A</span><span class="p">,</span> <span class="n">rightMotorA</span><span class="p">,</span> <span class="n">CHANGE</span><span class="p">);</span>
</span><span class='line'>  <span class="n">attachInterrupt</span><span class="p">(</span><span class="n">MOTOR_R_B</span><span class="p">,</span> <span class="n">rightMotorB</span><span class="p">,</span> <span class="n">CHANGE</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">analogWriteFrequency</span><span class="p">(</span><span class="n">MOTOR_L_PWM</span><span class="p">,</span> <span class="mi">18000</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="n">loop</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">MOTOR_STBY</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span> <span class="c1">// enable motors</span>
</span><span class='line'>  <span class="n">setMotorSpeed</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">getMotorSpeed</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\f\r</span><span class="s">Counts/minute is: &quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">DEC</span><span class="p">);</span>
</span><span class='line'>    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_STATUS</span><span class="p">,</span> <span class="o">!</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">LED_STATUS</span><span class="p">));</span>
</span><span class='line'>    <span class="n">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Next Steps</h2>

<p>The next steps forward from this point would be to sort out the chassis, either re-design it to take advantage of 5mm plastics or get it cut from 6mm plastic. Once I&rsquo;ve finalised my chassis design and actually have it I then can finish the logic board layout and get it sent off to be manufactured. Another step I can take in parallel would be see about implementing the closed loop control in the Teensy 3 or using my LPC1343 development board. I&rsquo;m planning on running this robot at the June 2014 Birmingham Tech Fest so I&rsquo;ll consider May 2014 to be my final deadline for a completed robot.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/20/Cupcake-o-Matic/">Cupcake-o-Matic</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-20T13:41:00+01:00" pubdate data-updated="true">Sep 20<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/09/20/Cupcake-o-Matic/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>This post is a copy of a log I wrote up <a href="http://wiki.london.hackspace.org.uk/view/Project:Cupcake-o-Matic">here</a>.</em></p>

<p>The Makerbot Cupcake CNC was Makerbot&rsquo;s first foray into the 3D printer kit market, and one of the first 3D printer kits on that market. The Cupcake CNC takes a lot of it&rsquo;s design cues from 2 sources, the initial reprap 3D printer, <a href="http://reprap.org/wiki/Darwin">Darwin</a>, and the other from the need to make it laser cut-able. It was followed by the Thing-o-Matic which fixed many of the problems associated with the Cupcake CNC.</p>

<p><img src="https://lh3.googleusercontent.com/-r1cPZChABMQ/Ujx77GRrmeI/AAAAAAAACn0/Yjtqp7HYJvk/w471-h835-no/Cupcake_cnc_224.png" title="'The modified Cupcake'" ></p>

<h2>The Start</h2>

<p>I bought a Cupcake CNC from Makerbot Industries in September 2009. I received Cupcake 224 from batch #6. I quickly assembled it and attempted a test print all in about 24 hours. It did not work. I could not get it to extrude plastic through the MK4 Plastruder reliably, when it did extrude I could then not get it to stick to the acrylic build platform. I left it be for a couple of years annoyed with what seemed a wasted purchase until January 2012 when I bought a MK5 drive gear from <a href="http://kd85.com/">KD85</a> , the closest European distributor. I also added a heated build platform to my order to ensure the extrusion would stick to the bed.</p>

<p>These two upgrades allowed me to start printing reliably and I immediately started printing a new extruder to improve the MK4 plastruder. I was aiming to replace it with a stepper motor driven one so as to improve the build quality with a better model slicer such as Slic3r. I ended up printing out multiple extruder bodies as I repeatedly printed the wrong ones. One good side affect of this was that I also ended up printing out the rest of the <a href="http://reprap.org/wiki/RepRapPro_Huxley">Huxley Pro</a> parts to match the NEMA14 stepper extruder body. A friend of mine has suggested he may find a use for it.</p>

<p>This vast amount of printing soon left me with very little of the 1lb natural ABS spool I received with the kit. I decided to buy some blue PLA as I thought it would be the ideal choice for future printing.</p>

<h2>The Modifications</h2>

<p>I have made the following modifications to my Cupcake CNC:</p>

<h3>Updating the Electronics</h3>

<p>The Cupcake originally came with the RepRap <a href="http://reprap.org/wiki/Generation_3">Generation 3 Electronics</a> set:</p>

<ul>
<li><a href="http://reprap.org/wiki/Motherboard_1.2">RepRap Motherboard v1.2</a> x1</li>
<li><a href="http://reprap.org/wiki/Extruder_Controller_2.2">Extruder Controller v2.2</a> x1</li>
<li><a href="http://reprap.org/wiki/Stepper_Motor_Driver_2.3">Stepper Motor Driver v2.3</a> x3</li>
<li><a href="http://reprap.org/wiki/OptoEndstop_2.1">Opto Endstop v2.1</a> x6</li>
</ul>


<p>The idea was that as each board carried out a specific function it would be easy to design and easy to replace/fix. Unfortunately it wasn&rsquo;t ideal as everyone has 3 axes and an extruder and by separating the boards it took up a lot of space and required lots of messy connecting wires.</p>

<p>One problem is that the Motherboard could only support 3 stepper motors however most 3D printers started to use a fourth stepper motor to drive the extruder. This led to some interesting hacks to add another stepper control channel to the Motherboard, the most popular of these was the <a href="http://www.thingiverse.com/thing:11837">3G 5D Shield</a>. It took one of the end stops from each Stepper Motor Driver and used them to generate the Enable, Step and Direction signals for a fourth Stepper Motor Driver. I did in fact make the required modifications to my Motherboard, see <a href="http://www.thingiverse.com/derivative:25852">here</a>, but I never did get round to using it as I decided that I wanted to step away from having so many separate boards mounted on my Cupcake&rsquo;s chassis.</p>

<p>Whilst looking at alternatives for the electronics I came across the <a href="http://reprap.org/wiki/Sanguinololu">Sanguinololu</a> controller board. Checking on eBay had a Sanguinololu v1.2+ listed, complete, for  &pound;89.00 + P&amp;P. I decided that it would be better to just buy these electronics which would allow me to simply drop in popular firmwares such as Sprinter, Marlin or something more esoteric without having to modify everything so that it would work with a RepRap Motherboard. I simply have to edit the configuration files to match my Cupcake. Of course it is not as simple as plug and play, the new firmwares allow for things like acceleration and software based end stops so will require some tweaking. Nor do many of the connectors match, the stepper motors had 0.156&#8221; pitch connector but needed 0.1&#8221; connectors, it also meant that I could not use a PC PSU for power any more.</p>

<h3>Improving the Power Supply</h3>

<p>The Cupcake electronics were designed to use a PC power supply as a cheap and readily available power source. A 300 Watt PSU costs very little and produces +12V and +5V directly, but due to the range of PC PSUs there is a lot of variation. Some PSUs needed a load on the +5V rail in order to produce voltages, even on the +12V rail, that were within tolerances. They also have to be enabled by connecting a pin on the large ATX connector to ground, otherwise only the standby +5V rail was powered. This mean that despite their initial attractiveness they caused a lot of problems, not to mention their large bulk.</p>

<p>Now most RepRaps use LED power supplies off of eBay, the typical standard is a +12V 30A model. This should be enough to power both the electronics and extruder but also a large 200x200mm heated print bed. It isn&rsquo;t quite as cheap as a PC PSU (about twice the price at &pound;20) it&rsquo;s certainly more compact and easier to use. One of the advantages of having a single board 3D printer controller is that it allows you to use a single regulator to produce the +5V rail for the micro-controller and logic circuits. I began to use the +12V LED PSU with my Cupcake-o-Matic and it worked very well with the Sanguinololu. It freed up a lot of space in the PSU mounting area underneath the build mechanism.</p>

<p>I also came into possession of a old HP laptop power supply. This PSU was rated at 19.5 Volts and could supply 11.8 Amps, the higher volts would mean that the motors could run more efficiently and the heater and heated bed would warm up quicker. The decrease in total current doesn&rsquo;t affect the Cupcake-o-Matic as it only has a 100x100mm heated bed.</p>

<h3>Adding a Cantilever Z Axis</h3>

<p>In order to move the extruder up and down in the Z-axis the Cupcake CNC used a platform suspended on 4 M8 nuts on threaded rods. These threaded rods were linked together with a timing belt such that if the motor moved one step (1.8&deg;) then all the threaded rods would rotate by the same amount. This meant you could get an accuracy of 0.00625mm per step. Unfortunately this was very slow and relied on the threaded rod being exactly straight which it rarely was. What would happen is as the Z platform rose during a build one or more of the threaded rods would move in the x or y axes there by throwing off any precise accuracy in these axes. Another serious problem with this arrangement was the assumption that the 4 M8 nuts would always remain level and wouldn&rsquo;t jam. As a result the Z axis platform would be wonky which didn&rsquo;t help when printing.</p>

<p>To first fix this I printed a <a href="http://www.thingiverse.com/thing:3091">Z-Wobble arrester without pin</a>. It replaces a nut on the Z platform and allows the threaded rod to move back and forth without necessarily dragging the platform in that direction. This was fiddle to install as it required the removal of a nut trap on the platform and then the nut to be moved down a bit, whilst still levelling the bed. It was hard to tell how well this was working but I certainly felt my Cupcake CNC worked better when the arrester was installed on the wonkiest threaded rod. However this did not fix the problem of having to level the Z platform so I began to research on <a href="http://www.thingiverse.com/">Thingiverse</a> for a good solution to solve my troubles permanently.</p>

<p>The first solution I found was a middle point solution, the <a href="http://www.thingiverse.com/thing:18849">ACME rod upgrade for Makerbot Cupcake</a>. You needed to replace the bent M8 threaded rods and nuts with an ACME screw thread on CNC machined rods, this would be both smooth and straight. This seems like a great idea but it requires purchasing &dollar;85 worth of ACME threaded rod from the USA, which would cost a ridiculous amount with overseas shipping. So I had to shelve this idea with some regret.</p>

<p>The Thing-o-Matic had come out for some time ago at this point and I was rather interested in the Z axis which was made up of a cantilevered platform which had 2 smooth rods for stability and a linear stepper motor for positioning. What with the Thing-o-Matic being rather similar to the Cupcake CNC I looked around for a way to add this cantilever in. The first examples I found require the back plate be removed and then the fitting of some large plastic parts to be fitted to accommodate the rods and motors. These struck me as being a little too focused on the need to be 3D printable to actually be usable. However I also found the <a href="http://www.thingiverse.com/thing:14492">Cantilevered Z-Stage for Cupcake</a> which is a laser cut design in 5mm plywood. Unfortunately I&rsquo;ve not been able to find anywhere in the UK that supplies, let alone cuts 5mm plywood, it seems to be a uniquely US thing. With that in mind I had to settle for acrylic which is available in a range of colours with a 5mm thickness.</p>

<p><img src="https://lh4.googleusercontent.com/-8V--yy1HxiM/Ujx8AkSu2UI/AAAAAAAACoc/Rt5bklo7a9k/w800/Cupcake_cantilever_z_axis.png" title="'A cantilever Z-axis in laser cut acrylic.'" ></p>

<h3>A Better Extruder</h3>

<p>The Makerbot Cupcake CNCs from batch 6 came with a laser cut <a href="http://wiki.makerbot.com/plastruder-mk4">Plastruder MK4</a>. To drive the filament a T2.5 timing belt gear was used, it had 17 teeth which would bite into the filament, however the teeth were blunt so could not get a good grip on the filament reliably. This lead to the extruder jamming mid way through a print. When the Plastruder MK4 came out it was a new design but it was quickly superseded by improvements from the RepRap project.</p>

<p>These improvements took the form of the <a href="http://reprap.org/wiki/Wade%27s_Geared_Extruder">Wade&rsquo;s Geared Extruder</a>, a simplified version of <a href="http://reprap.org/wiki/Geared_Nema17_Extruder_Driver">Adrian&rsquo;s Geared Extruder</a>. The Wade&rsquo;s extruder is notable for its use of a single mounting block, a stepper motor, two gears and an idler assembly. The gears drive a &lsquo;Hobbed&rsquo; bolt, this is a bolt where a thread has been cut across the bolt&rsquo;s circumference. The thread grips the filament but does not cut into it unnecessarily.</p>

<p>When I managed to get my MK4 working I printed out, among others, a <a href="http://www.thingiverse.com/thing:8252">Greg&rsquo;s Hinged Accessible Extruder</a> as I wanted the best extruder. I was unsure as to what hot end I would end up with so ended up removing that part of the SCAD code. This probably wasn&rsquo;t my best idea as it makes mounting the Cupcake hot end very difficult and I&rsquo;ve had to use some long M4 bolts and a piece of laser cut 3mm MDF to clamp it in place. This bodge, to be kind, can be seen in the image to the right. I&rsquo;m hoping this bodge will last long enough for me to print an improved extruder, perhaps the latest modified Greg&rsquo;s but with mounting options for the 16mm diameter Cupcake hot end.</p>

<p><img src="https://lh6.googleusercontent.com/-hkS4tbBHrCM/Ujx7-USM01I/AAAAAAAACoQ/pxermp3R9wQ/w582-h835-no/Gregs_Extruder_mounted_in_cupcake.png" title="'The Gregs extruder setup.'" ></p>

<p>I&rsquo;d also like to alter my hot end, at the moment it consists of the MK4 hotend but instead of nichrome wire wrapped around the brass barrel/nozzle I&rsquo;ve added an aluminium heater block. This is a 20x20x10mm block of milled aluminium with a 5.6 ohm 2 Watt vitreous enamel resistor mounted inside. The thermistor is trapped on the outside with a small M3 washer screw. I&rsquo;d love to reduce the amount of metal on my hot end and just use a nozzle mounted directly into the PTFE heat barrier and go back to using nichrome wire. This would let it heat up much faster but it would mean that it would need to be carefully controlled whilst extruding as it would lose heat much more easily. However I could use a <a href="http://reprap.org/wiki/J_Head_Nozzle">J-Head Nozzle</a> hot end, these are popular due to their high reliability, unfortunately they can cost up to &pound;50 which is a lot for something so small.</p>

<h2>The Future</h2>

<p>I&rsquo;d like to add a few more upgrades to this &ldquo;Cupcake-o-Matic&rdquo; in the future namely:</p>

<ul>
<li>Add an LED ring around the hot end so as to easily see what is happening.</li>
<li>Replace the hot end thermistor for a thermocouple to allow for a better control system.</li>
<li>Add a webcam mount for videos or remote printing.</li>
<li>Affix end stops to allow for automated homing.</li>
<li>Exchange the Z axis drive with a lead screw instead of M8 rod (possibly TR8x1.5).</li>
<li>Tune the whole 3D printer for quieter printing.</li>
</ul>


<p>At the moment I view 3D printing akin to Linux. In order to be working on the cool parts you MUST have a rock solid back up machine so that you can rescue the cutting edge machine when needs be. I want my Cupcake-o-Matic to be my back-up machine.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/16/speed-controllers/">Speed Controllers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-16T17:19:00+01:00" pubdate data-updated="true">Sep 16<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/09/16/speed-controllers/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The Unnamed will be powered by 2 Gimson GR02s which drive a wheel and a pulley each, which turn another wheel and pulley combo. This gives me four wheeled drive which helps with acceleration and manoeuvrability. However I need something to take the servo signals (a period of 20 milliseconds with a high pulse between 1 millisecond to 2 milliseconds to determine speed and direction) and convert them into motor signals.</p>

<p>A GR02 will, when stalled, pull approximately 61.6 Amps according to the manufacturer. This means I need to find something that can withstand that much current for short moments of time. The best way to do this is to do some research and build up a table of options.</p>

<table>
<thead>
<tr>
<th></th>
<th>&nbsp;</th>
<th><a href="http://e0designs.com/products/ragebridge/">RageBridge</a>&emsp;</th>
<th><a href="http://www.botbitz.com/index.php?route=product/product&amp;path=59&amp;product_id=59">BB TZ-85A</a>&emsp;</th>
<th><a href="http://www.hobbyking.com/hobbyking/store/__29644__Turnigy_Brushless_ESC_85A_w_5A_SBEC_UK_Warehouse_.html">TZ-85A</a>&emsp;</th>
<th><a href="http://www.dimensionengineering.com/products/sabertooth2x25">Sabertooth 2x25A</a>&emsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>Channels&emsp;</td>
<td> 2 </td>
<td> 1 </td>
<td> 1 </td>
<td> 2</td>
</tr>
<tr>
<td></td>
<td>Continuous Current&emsp;</td>
<td> 30 Amps </td>
<td> 85 Amps </td>
<td> 85 Amps </td>
<td> 25 Amps</td>
</tr>
<tr>
<td></td>
<td>Peak Current&emsp;</td>
<td> 90 Amps </td>
<td> 100 Amps </td>
<td> 100 Amps </td>
<td> 50 Amps</td>
</tr>
<tr>
<td></td>
<td>Min Voltage&emsp;</td>
<td> 12 Volts </td>
<td> 7.4 Volts </td>
<td> 7.4 Volts </td>
<td> 6 Volts</td>
</tr>
<tr>
<td></td>
<td>Max Voltage&emsp;</td>
<td> 36 Volts </td>
<td> 25.2 Volts </td>
<td> 25.2 Volts </td>
<td> 30 Volts</td>
</tr>
<tr>
<td></td>
<td>Dimensions&emsp;</td>
<td> ? </td>
<td> ? </td>
<td> ? </td>
<td> ? </td>
</tr>
<tr>
<td></td>
<td>Weight&emsp;</td>
<td> 99.2 Grams </td>
<td> 89 Grams </td>
<td> 89 Grams </td>
<td> 90 Grams</td>
</tr>
<tr>
<td></td>
<td>Price&emsp;</td>
<td> &pound;116.16 </td>
<td> &pound;43.94 </td>
<td> &pound;28.22 </td>
<td> &pound;78.48|</td>
</tr>
</tbody>
</table>


<br />


<p>One thing to note about this comparison is that the TZ-85As are only single channel, I will need two to drive both my motors. I&rsquo;m also not confident that they will withstand 85 Amps continuously. However there have been widely used without complaints in the Australian robot combat leagues. I&rsquo;ve included the pre-programmed ones sold by BotBitz as well as un-programmed ones directly from HobbyKing.</p>

<p><img src="https://lh5.googleusercontent.com/-W_1vNbxzFk0/VMlULs7o7eI/AAAAAAAAC4Y/rOeGUtbUxaY/w510-h398-no/Tz85A.jpg"></p>

<p>Looking at that table the TZ-85As seem to be the best for current handling capabilities and their maximum voltage is greater than the motor can handle. They are also quite compact and if I buy them from HobbyKing and re-program them myself they work out to be much cheaper. The lower cost also means that I feel alot better about modifying them as having spares around will not be expensive.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/15/unnamed-design-revisions/">Unnamed Design Revisions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-15T17:40:00+01:00" pubdate data-updated="true">Sep 15<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/09/15/unnamed-design-revisions/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After coming up with the first design I posted it on the Fighting Robot Association (<a href="http://www.fightingrobots.co.uk/">FRA</a>) forums to get some comments and suggestions. One of the worries was that it wouldn&rsquo;t be armoured enough to survive the spinners. Another concern raised was the need for a solid drive-train as the robot would need to be agile and fast to out manoeuvre opponents.</p>

<p>You can visit the forum post <a href="http://www.fightingrobots.co.uk/threads/11705-the-unnamed-(fw)">here</a>.</p>

<h2>What&rsquo;s Changed ?</h2>

<p>All the internal UHMWPE support/structure is being replaced with 2&#8221;x1&#8221;x0.125&#8221; aluminium (6063 T3) channel. I&rsquo;ll be buying it from Aluminium Warehouse and they offer a cutting service which I&rsquo;ll use to get the lengths into ~500mm sections. This massively simplifies the mounting of the motors not to mention improving the rigidity of the robot. I&rsquo;m going to keep the 20mm &amp; 0.5mm tool steel composite armour for the moment however it can be changed out later.</p>

<ul>
<li>I&rsquo;ll make nut strip using 12mmx12mm aluminium bar with M6 threads and use that to connect the aluminium channel together.</li>
<li>The front and rear armour has been upgraded to 4mm-6mm Hardox however this will need to be machined by someone with the tools.</li>
<li>The top and bottom armour/covers will also be upgraded to 5mm polycarbonate however I&rsquo;m not too sure how to mount these.</li>
<li>The lifter will now be powered by 2 linear actuators from Gimson but the overall design &amp; calculations are still in progress.</li>
<li>The wheels will be Banebots 2-7/8&#8221; Shure 50 tires with &frac34;&#8221; hex mounting, I&rsquo;ll then use the &frac12;&#8221; to &frac34;&#8221; key way mount to affix these to the shafts. The gears will hopefully be attached to the wheels but I may get HPC to put a &frac12;&#8221; key way mount on them too.</li>
</ul>


<p>The revised total weight is 8.3kg minus lifting arm and revised total cost is &pound;414.06.</p>

<p><img src="https://lh3.googleusercontent.com/-cdFqAYJzpj4/Ujx7-zmH_iI/AAAAAAAACoE/Yds_11oxjC8/w800/The_Unnamed_Featherweight_Iso_28-08-2013.png" title="The Unnamed after revisions" alt="The Unnamed from a front isometric view"></p>

<p><img src="https://lh6.googleusercontent.com/-wEIegLXU6GE/Ujx8AJJ_XII/AAAAAAAACoU/2GDiBjVDc3c/w800/The_Unnamed_Featherweight_Rear_Iso_28-08-2013.png" title="The Unnamed after revisions" alt="The Unnamed from a rear isometric view"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/14/the-unnamed/">The Unnamed</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-14T09:51:00+01:00" pubdate data-updated="true">Sep 14<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/09/14/the-unnamed/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve been a great fan of Robot Wars since 1998 leading to running a robot club in secondary school. None of the feather weight robots that were being built really got anywhere, and considering they were largely built out of MDF they weren&rsquo;t going to be very robust. However this did plant a seed in my mind which has been constantly growing and nagging. The MDF robots hit the painful snag of not having a decent way to mount wheels to the windscreen wiper motors and attempts to use the Rex&rsquo;s Robot Challenge method of washers and wood never worked well enough.</p>

<p>Now I&rsquo;ve moved on a little bit and got a proper job I think it&rsquo;s time to have another go with 15 years of added experience.</p>

<h2>Scope</h2>

<p>I&rsquo;ve got an electronic engineering degree and if that and my work experience have taught me one thing, requirements are king. With that in mind here I go:</p>

<ul>
<li>To design, build and compete with a 12-13.6kg robot</li>
<li>To spend less than &pound;500 on parts</li>
<li>To increase my mechanical knowledge</li>
<li>To enjoy the fact my 100s of hours of work may well be destroyed in seconds by a full body spinner.</li>
</ul>


<h2>Description</h2>

<p>Now in order to fulfil the compete part of that specification I want something that is reasonably simple and robust, no esoteric weapons. Cutting and impact weapons always seemed to lack any visible damage element (heavy weight Razor aside). This leaves spinners and flippers and I much prefer Chaos 2 to Hypnodisk&hellip;</p>

<p>I&rsquo;ve been a great fan of Charles Guan&rsquo;s <a href="http://www.etotheipiplusone.net/">blog</a> and I&rsquo;m going to heavily plagiarise from his designs, after all he is a mechanical engineer from MIT who builds successful featherweights. Unfortunately I do not have access to quite his wealth of machine tools, I have access to a friend&rsquo;s combination lathe &amp; mill, a few mechanical engineers to run ideas by and that&rsquo;s about it. I personally own a hacksaw, a 14V drill and 1 working 3D printer.</p>

<p>Pneumatics are something I&rsquo;m totally unfamiliar with and so I feel for safety I will leave them well alone, instead I shall use a 4 bar lifter. Four bar lifters seem to be complicated to design but straightforward to construct which certainly fits my limitations. I&rsquo;ll couple that with some high power, high speed drill motors with gear boxes in an attempt to mix &ldquo;Test Bot 4 SP1&rdquo; and &ldquo;Null Hypothesis&rdquo; from Charles Guan.</p>

<h2>The Ingredients</h2>

<ul>
<li>20mm thick Ultra High Molecular Weight PolyEthylene (UHMWPE) for the chassis frame held together with M8 bolts and threaded inserts</li>
<li>0.5mm tool steel (or better) side armour</li>
<li>3mm steel (or better) armour for front and rear</li>
<li>3mm polycarbonate for the top &amp; bottom armour held with M5 bolts and threaded inserts</li>
<li>2 off Gimson GR02 18V 24:1 motors for drive</li>
<li>4 off ~75mmx20mm wheels, either 3&#8221; no names or Banebots 2-7/8&#8221;</li>
<li>4 off 5mm pitch, 9mm HTD belt &amp; pulleys to drive 2 wheels per motor</li>
<li>1 off 6S1P 22.2V 5000mAh 35-70C Turnigy Nano-tech LiPoly battery pack</li>
<li>1 off custom motor &amp; weapon controller with magic</li>
<li>1 off 2.4GHz RC set (suggestions welcome)</li>
<li>1 off weapon, 4 bar lifter, tending towards a linear actuator from Gimson.</li>
</ul>


<h2>The Result</h2>

<p>This is the work of a few nights of playing around in SketchUp:
<img src="https://lh4.googleusercontent.com/-ehveM2fI6oc/Ujx79WnwE0I/AAAAAAAACn8/FV2EaW4s4H8/w1357-h762-no/The_Unnamed_Featherweight_20-08-2013.png" title="The Unnamed" alt="The first render of The Unnamed"></p>

<p>The side armour will consist of 0.5mm of tool steel mounted to a 20mm thick panel of UHMWPE. I&rsquo;m hoping that this composite armour should be capable of surviving spinner attacks because the tool steel should stop the teeth from biting very well and the UHMWPE will flex absorbing some of the spinners impact. Of course it&rsquo;s fairly replaceable and I may redesign it in future as I finalise it.</p>

<p>I&rsquo;ve chosen polycarbonate for the top and bottom as I think featureless steel boxes are pretty boring to look at even if they are painted amazingly. I may have to thicken up the polycarbonate in a later redesign but it should be both strong and transparent enough for this robot.</p>

<p>The <a href="http://www.gimsonrobotics.co.uk/">Gimson</a> GR02 motors will be the 18 Volt version with a 24:1 gear ratio output. I chose this rather than the 36:1 as while a ratio of 36:1 gave me a faster top speed, it had slower acceleration, the 24:1 gives me a faster acceleration which I feel will be better suited to arena combat. With 75mm wheels I&rsquo;m estimating a top speed of around 3.2 metres per second, the number will go down due to the motors being loaded, but at the same time I&rsquo;ll be overvolting them from 18 Volts to 22 Volts.</p>

<p>Hopefully once I get an idea of how I&rsquo;m going to mount the wheels and the dimensions of the lifter I should be able to push forward and order the parts. The current running cost is an estimated &pound;350 minus the cost of steel armour, the lifter and the electronics. The current running weight is 9.7kg all included however I expect that to creep up as the wheels and lifter arrangements are finalised.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/11/star-tock-tock-star-is-this-thing-on/">*tock Tock* Is This Thing On?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-11T20:26:00+01:00" pubdate data-updated="true">Sep 11<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/09/11/star-tock-tock-star-is-this-thing-on/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve decided to start a blog. I have lots of creative ideas and keep starting projects but never quite finish them. I&rsquo;m hoping that by writing about them I&rsquo;ll end up finishing more of them, or at least getting them to a finished-ish state. So with out further ado&hellip;</p>

<h2>Active projects</h2>

<h3>Makerbot Cupcake-o-Matic</h3>

<p>This is my fairly successful attempt to convert my non-working <a href="http://www.makerbot.com/">Makerbot</a> <a href="http://www.makerbot.com/support/cupcake/">Cupcake</a> into a working reliable 3D printer. I&rsquo;ve largely finished this, it just needs the wires hiding to neaten the external appearance, of course it&rsquo;s not quite as simple as that but I&rsquo;ll save that for a subsequent post.</p>

<h3>Prusa i3</h3>

<p>Whilst the Cupcake-o-Matic works, and fairly reliable at that it does only have a 100mm x 100mm x 100mm build volume with a single extruder it&rsquo;s not very expandable. I do want to print large objects in multiple materials and so I began to construct a single sheet style <a href="http://reprap.org/wiki/Prusa_i3">Prusa i3</a>. I have nearly all of the parts but I still need to print some and design some.</p>

<h3>The Unnamed featherweight</h3>

<p>I&rsquo;ve been interested in combat robots since Robot Wars came out in 1998. I tried my hand at building a featherweight (12Kg max) class robot whilst at secondary school but it didn&rsquo;t work out at all. After reading Charles Guan&rsquo;s <a href="http://www.etotheipiplusone.net/">blog</a> I&rsquo;ve decided to have another go.</p>

<h3>Powerbridge</h3>

<p>Of course a 12kg combat robot will need some motor controllers, so I resurrected some designs I&rsquo;ve been playing around and started to update them for the featherweight class of robots, it has the preliminary specs of 2x 20Amp 50Volt motor controller with easy firmware updates.</p>

<h3>Claymore MiniSumo</h3>

<p>Another combat robot I&rsquo;ve been designing is a small autonomous 500gram sumo bot, I like the idea of robots that control themselves, the start of Skynet as it were.</p>

<h2>That is it</h2>

<p>I&rsquo;m going to concentrate on these 4 projects until I complete as many of them as possible. My ideas for other projects like: a gokart, a home server, home automation, an updated <a href="http://www.ladyada.net/make/wavebubble/">Wave Bubble</a> are all going on hiatus.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
	<h1>About Me</h1>
	<p>I am an Electronic Engineer working in the south of England. I enjoy trying to build the random ideas that occur to me, some don&#8217;t work out, but some do and I try to document them here.</p>
	<p>I&#8217;ve been into electronics since I was 14 and into building random things well before that.</p>
</section>



<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/02/03/claymores-chassis/">Claymore&#8217;s Chassis</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/04/The-Unnamed-electronic-systems/">The Unnamed Electronic Systems</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/25/rules-of-thumb-for-designing-4-bar-lifters/">Rules of Thumb for Designing 4-bar Lifters</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/22/mini-sumo-claymore/">Mini-Sumo Claymore</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/20/Cupcake-o-Matic/">Cupcake-o-Matic</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Links</h1>
  <ul>
    <li><a href="http://hackaday.com/">Hack A Day</a></li>
    <li><a href="http://dangerousprototypes.com/">Dangerous Prototypes</a></li>
    <li><a href="http://www.etotheipiplusone.net/">EQUALS ZERO</a></li>
    <li><a href="http://www.bunniestudios.com/">bunnie:studios</a></li>
    <li><a href="http://www.hoektronics.com/">Hoektronics</a></li>
    <li><a href="http://ch00ftech.com/">ch00ftech</a></li>
    <li><a href="http://makezine.com/blog/">Makezine</a></li>
	<li><a href="https://www.sparkfun.com/">Sparkfun</a></li>
    <li><a href="http://www.adafruit.com/">Adafruit Industries</a></li>
    <li><a href="http://www.coolcomponents.co.uk/">Cool Components</a></li>
    <li><a href="http://www.skpang.co.uk/catalog/index.php">SK Pang</a></li>
    <li><a href="https://www.hobbytronics.co.uk/">Hobbytronics</a></li>
    <li><a href="http://proto-pic.co.uk/">Proto-PIC</a></li>
    </ul>
</section>
<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/Pinski1">@Pinski1</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'Pinski1',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




<section>
  <h1>Categories</h1>
  <ul id="categories">
	<li>3D Printers</li><ul><li><a href='/blog/categories/cupcake-o-matic'>Cupcake-o-Matic</a></li><li><a href='/blog/categories/prusa-i3'>Prusa i3</a></li></ul><li>Robots</li><ul><li><a href='/blog/categories/claymore'>Claymore</a></li><li><a href='/blog/categories/powerbridge'>Powerbridge</a></li><li><a href='/blog/categories/the-unnamed'>The Unnamed</a></li></ul>
  </ul>
</section>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Pinski1 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wiresandbits';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
